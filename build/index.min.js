!function(){"use strict";const t=(t={type:n,id:o,parent:l,innerHTML:r,inputProps:i,eventObject:a,attrs:c})=>{let e,{type:n,id:o,parent:l,innerHTML:r,inputProps:i,eventObject:a,attrs:c}=t;if(!n||!l)return;"string"==typeof l&&(l=document.getElementById(l));let s=document.createElement(n);if("input"===n){if(i.checked&&(s.checked=i.checked),s.type=i.type,e=i.container?document.createElement(i.container):document.createElement("div"),i.name&&s.setAttribute("name",i.name),i.label&&i.for){const t=document.createElement("label");t.setAttribute("for",i.for),t.innerHTML=i.label,e.appendChild(t),l.appendChild(e),l=e}i.value&&s.setAttribute("value",i.value),i.min&&s.setAttribute("min",i.min),i.max&&s.setAttribute("max",i.max),i.step&&s.setAttribute("step",i.step)}if(o&&s.setAttribute("id",`${o}`),c)for(let t=0;t<c.length;t++)s.setAttribute(c[t].attr,c[t].value),"disabled"===c[t].attr&&"false"===c[t].value&&s.removeAttribute("disabled");r&&(s.innerHTML=r),a&&s.addEventListener(a.listener,(t=>{a.func(t)})),l.appendChild(s)},e=(t,e)=>"string"!=typeof t?'replaceHTML error: Parameter "text" not a string.':(e?"&lt;br&gt;"===(t=(t=(t=(t=t.replace(/\[\/]?n/g,"<br>")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/ /g,"&nbsp;")).substr(t.length-10)&&(t=t.slice(0,-10)):t=(t=(t=(t=t.replace(/<br\s*[\/]?>/gi,"\n")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&nbsp;/g," "),t),n=n=>{let o="";const l=t=>"Â ".repeat(t),r=document.getElementById("table-code");let i="";if(n.useClassName&&n.className.length>0&&(i=` class="${n.className}"`),o+=`&lt;table${i}&gt<br>`,n.caption&&(o+=`${l(2)}&lt;caption&gt${n.captionText}&lt;/caption&gt<br>`),n.colgroup){o+=`${l(2)}&lt;colgroup&gt<br>`;for(let t=0;t<n.colgroupProps.length;t++){let e=`${l(4)}&lt;col`;n.colgroupProps[t].span,e+="&gt<br>",o+=e}o+=`${l(2)}&lt;/colgroup&gt<br>`}if(n.header){o+=`${l(2)}&lt;thead&gt<br>${l(4)}&lt;tr&gt<br>`;for(let t=0;t<n.headerContent.length;t++)o+=`${l(6)}&lt;th&gt${n.headerContent[t].innerHTML}&lt;/th&gt<br>`;o+=`${l(4)}&lt;/tr&gt<br>${l(2)}&lt;/thead&gt<br>`}o+=`${l(2)}&lt;tbody&gt<br>`;for(let t=0;t<n.content.length;t++){o+=`${l(4)}&lt;tr&gt<br>`;for(let r=0;r<n.content[t].length;r++)n.content[t][r].colCollision||n.content[t][r].rowCollision||(o+=`${l(6)}&lt;td`,n.content[t][r].rowspan>1&&(o+=` rowspan="${n.content[t][r].rowspan}"`),n.content[t][r].colspan>1&&(o+=` colspan="${n.content[t][r].colspan}"`),o+=`&gt${e(n.content[t][r].innerHTML,!0)}&lt;/td&gt<br>`);o+=`${l(4)}&lt;/tr&gt<br>`}return o+=`${l(2)}&lt;/tbody&gt<br>`,o+="&lt;/table&gt<br>",r.innerHTML=o,document.getElementById("copy-table-code")||t({type:"button",id:"copy-table-code",parent:"markup-controls",innerHTML:"Copy HTML",eventObject:{listener:"click",func:()=>{(t=>{const e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)})(e(r.innerHTML))}}}),o},o=e=>{let n=document.getElementById("preview-table");if(n&&n.parentNode.removeChild(n),t({type:"table",id:"preview-table",parent:"preview"}),e.caption&&t({type:"caption",id:"preview-table-caption",parent:"preview-table",innerHTML:e.captionText}),e.header){t({type:"thead",id:"preview-thead",parent:"preview-table"}),t({type:"tr",id:"preview-thead-row",parent:"preview-thead"});for(let n=0;n<e.headerContent.length;n++)t({type:"th",parent:"preview-thead-row",innerHTML:e.headerContent[n].innerHTML})}t({type:"tbody",id:"preview-tbody",parent:"preview-table"});for(let n=0;n<e.content.length;n++){t({type:"tr",id:`preview-table-row-${n}`,parent:"preview-tbody"});for(let o=0;o<e.content[n].length;o++)e.content[n][o].rowCollision||e.content[n][o].colCollision||t({type:"td",id:`preview-td-${n}${o}`,parent:`preview-table-row-${n}`,innerHTML:e.content[n][o].innerHTML,attrs:[{attr:"rowspan",value:e.content[n][o].rowspan},{attr:"colspan",value:e.content[n][o].colspan}]})}},l=()=>{const e=document.getElementById("editor-table-container");e.parentNode.removeChild(e),t({type:"div",id:"editor-table-container",parent:"editor-area"}),t({type:"table",id:"editor-table",parent:"editor-table-container",attrs:[{attr:"class",value:"editor-table"}]})},r=e=>{t({type:"div",id:"editor-table-controls",parent:"editor-table-container"}),t({type:"button",id:"add-row",parent:"editor-table-controls",innerHTML:"add row",eventObject:{listener:"click",func:()=>{e.content.push((t=>{let e=[];for(let n=0;n<t.content[0].length;n++)e.push({innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1});return e})(e)),u(e,!0)}}}),t({type:"button",id:"remove-row",parent:"editor-table-controls",innerHTML:"remove row",eventObject:{listener:"click",func:()=>{for(let t=0;t<e.content.at(-1).length;t++)if(!0===e.content.at(-1)[t].rowCollision)return void alert("Rowspan detected, cannot delete row. Remove rowspan first.");e.content.length>1&&e.content.pop(),u(e,!0)}}}),t({type:"button",id:"add-column",parent:"editor-table-controls",innerHTML:"add column",attrs:[{attr:"class",value:"add-column"}],eventObject:{listener:"click",func:()=>{(t=>{t.columnSettings.push({useWidth:!1,width:0,widthUnits:"px",align:"left"}),t.colgroupProps.push({span:1}),t.headerContent.push({innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}),t.content.forEach((t=>t.push({innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1})))})(e),u(e,!0)}}}),t({type:"button",id:"remove-column",parent:"editor-table-controls",innerHTML:"remove column",eventObject:{listener:"click",func:()=>{for(let t=0;t<e.content.length;t++)if(!0===e.content[t].at(-1).colCollision)return void alert("Colspan detected, cannot delete column. Remove colspan first.");e.columnSettings.length>1&&e.columnSettings.pop(),e.colgroupProps.length>1&&e.colgroupProps.pop(),e.headerContent.length>1&&e.headerContent.pop(),e.content.forEach((t=>{t.length>1&&t.pop()})),u(e,!0)}}}),t({type:"input",id:"caption-toggle",parent:"editor-table-controls",attrs:[{attr:"type",value:"checkbox"},{attr:"name",value:"captionToggle"},{attr:"value",value:"Toggle caption"}],inputProps:{type:"checkbox",label:"Caption",name:"caption-toggle",for:"caption-toggle",value:"Toggle Caption",checked:e.caption},eventObject:{listener:"click",func:()=>{e.caption=!e.caption,u(e,!0)}}}),t({type:"input",id:"colgroup-toggle",parent:"editor-table-controls",inputProps:{type:"checkbox",label:"Colgroup",name:"colgroup-toggle",for:"colgroup-toggle",checked:e.colgroup},eventObject:{listener:"click",func:()=>{e.colgroup=!e.colgroup,u(e,!0)}}}),t({type:"input",id:"header-toggle",parent:"editor-table-controls",inputProps:{type:"checkbox",label:"Header",name:"header-toggle",for:"header-toggle",checked:e.header},eventObject:{listener:"click",func:()=>{e.header=!e.header,u(e,!0)}}}),t({type:"input",id:"table-use-classname",parent:"editor-table-controls",inputProps:{type:"checkbox",label:"Use table classname",for:"table-use-classname",checked:e.useClassName},eventObject:{listener:"click",func:()=>{e.useClassName=!e.useClassName,u(e,!0)}}}),e.useClassName&&t({type:"input",id:"table-class-selector",parent:"editor-table-controls",inputProps:{type:"text",label:"Table classname",for:"table-class-selector",value:e.className},eventObject:{listener:"input",func:t=>{e.className=t.target.value,u(e)}}})},i=e=>{t({type:"tr",id:"col-settings-container",parent:"editor-table",attrs:[{attr:"style",value:"display: table-header-group"}]});for(let n=0;n<e.columnSettings.length;n++){t({type:"td",id:`setting-${n}`,parent:"col-settings-container",attrs:[{attr:"width",value:!!e.columnSettings[n].useWidth&&e.columnSettings[n].width+e.columnSettings[n].widthUnits},{attr:"span",value:e.columnSettings[n].span?e.columnSettings[n].span+"":1},{attr:"style",value:"display: table-cell"}]}),t({type:"div",id:`col-align-radio-group-${n}`,parent:`setting-${n}`,innerHTML:"Text align"});["no align","left","center","right","justify"].map(((o,l)=>{t({type:"input",id:`col-align-option-${n}${l}`,parent:`col-align-radio-group-${n}`,inputProps:{type:"radio",label:o,value:o,name:`align-options-${n}`,for:`col-align-option-${n}${l}`,checked:e.columnSettings[n].align===o},eventObject:{listener:"click",func:t=>{e.columnSettings[n].align=t.target.value,u(e,!0)}}})})),t({type:"input",id:`use-col-fixed-width-${n}`,parent:`setting-${n}`,inputProps:{type:"checkbox",label:"Fixed width",for:`use-col-fixed-width-${n}`,checked:e.columnSettings[n].useWidth},eventObject:{listener:"click",func:()=>{e.columnSettings[n].useWidth=!e.columnSettings[n].useWidth,u(e,!0)}}}),e.columnSettings[n].useWidth&&(t({type:"input",id:`col-width-input-${n}`,parent:`setting-${n}`,inputProps:{type:"number",container:"div",for:`columnWidth-${n}`,label:"Col width",value:e.columnSettings[n].width,min:0,max:1e3}}),t({type:"button",id:`col-width-${n}-set`,parent:`setting-${n}`,innerHTML:"Set",eventObject:{listener:"click",func:()=>{const t=document.getElementById(`col-width-input-${n}`).value;e.columnSettings[n].width=t,u(e,!0)}}}))}},a=e=>{e.caption&&t({type:"caption",id:"table-caption",parent:"editor-table",innerHTML:e.captionText,attrs:[{attr:"contenteditable",value:"true"}],eventObject:{listener:"input",func:t=>{e.captionText=t.target.textContent,u(e)}}})},c=e=>{if(e.colgroup){t({type:"colgroup",id:"editor-table-colgroup",parent:"editor-table",attrs:[{attr:"style",value:"display: table-header-group"}]});for(let n=0;n<e.colgroupProps.length;n++)t({type:"col",id:`colgroup-item-${n}`,parent:"editor-table-colgroup",attrs:[{attr:"span",value:e.colgroupProps[n].span?e.colgroupProps[n].span+"":1}]})}},s=e=>{if(e.header){t({type:"thead",id:"table-header",parent:"editor-table"}),t({type:"tr",id:"table-header-row",parent:"table-header"});for(let n=0;n<e.headerContent.length;n++)t({type:"th",id:`table-header-row-cell-${n}`,parent:"table-header-row",innerHTML:e.headerContent[n].innerHTML,attrs:[{attr:"contenteditable",value:"true"}],eventObject:{listener:"input",func:t=>{e.headerContent[n].innerHTML=t.target.textContent,u(e)}}})}},p=(t,e,n,o,l)=>{const r=t.content[e][n].rowspan,i=t.content[e][n].colspan;if(r>1)for(let a=l;a<r;a++)for(let l=0;l<i;l++)t.content[e+a][n+l].rowCollision=o;if(i>1)for(let a=l;a<i;a++)for(let l=0;l<r;l++)t.content[e+l][n+a].colCollision=o},d=e=>{t({type:"tbody",id:"table-body",parent:"editor-table"});for(let n=0;n<e.content.length;n++){t({type:"tr",id:`table-row-${n}`,parent:"table-body"});for(let o=0;o<e.content[n].length;o++)e.content[n][o].rowCollision||e.content[n][o].colCollision||(p(e,n,o,!0,1),t({type:"td",id:`td-${n}${o}`,parent:`table-row-${n}`,attrs:[{attr:"rowspan",value:e.content[n][o].rowspan},{attr:"colspan",value:e.content[n][o].colspan}]}),t({type:"p",id:`p-${n}${o}`,parent:`td-${n}${o}`,innerHTML:e.content[n][o].innerHTML,attrs:[{attr:"classname",value:"td-p"},{attr:"contenteditable",value:"true"}],eventObject:{listener:"input",func:t=>{e.content[n][o].innerHTML=t.target.innerHTML,u(e)}}}),t({type:"button",id:`increase-rowspan-button-${n}${o}`,parent:`td-${n}${o}`,innerHTML:"RS+",attrs:[{attr:"classname",value:"increase-rowspan-button"}],eventObject:{listener:"click",func:()=>{let t=0;for(let n=0;n<e.content.length-1;n++)e.content[n][o].rowCollision||(t+=e.content[n][o].rowspan);(t>=e.content.length||n===e.content.length-1)&&e.content.push(createTableRow(e)),e.content[n][o].rowspan++,p(e,n,o,!0,1),u(e,!0)}}}),t({type:"button",id:`decrease-rowspan-button-${n}${o}`,parent:`td-${n}${o}`,innerHTML:"RS-",attrs:[{attr:"classname",value:"decrease-rowspan-button"},{attr:"disabled",value:e.content[n][o].rowspan>1?"false":"true"}],eventObject:{listener:"click",func:()=>{p(e,n,o,!1,0),e.content[n][o].rowspan--,u(e,!0)}}}),t({type:"button",id:`increase-colspan-button-${n}${o}`,parent:`td-${n}${o}`,innerHTML:"CS+",eventObject:{listener:"click",func:()=>{let t=0;for(let o=0;o<e.content[n].length-1;o++)e.content[n][o].colCollision||(t+=e.content[n][o].colspan);(t>=e.content[n].length||o===e.content[n].length-1)&&(e.colgroupProps.push({useWidth:!1,width:0,widthUnits:"px",span:1}),e.headerContent.push({innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}),e.content.forEach((t=>t.push({innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1})))),e.content[n][o].colspan++,p(e,n,o,!0,1),u(e,!0)}}}),t({type:"button",id:`decrease-colspan-button-${n}${o}`,parent:`td-${n}${o}`,innerHTML:"CS-",attrs:[{attr:"classname",value:"decrease-colspan-button"},{attr:"disabled",value:e.content[n][o].colspan>1?"false":"true"}],eventObject:{listener:"click",func:()=>{p(e,n,o,!1,0),e.content[n][o].colspan--,u(e,!0)}}}))}},u=(t,e)=>{localStorage.setItem("savedState",JSON.stringify(t)),e&&g(t),n(t),o(t)},g=t=>{[l,i,r,a,c,s,d].map((e=>e(t)))};let b="",h={loading:!0,header:!0,colgroup:!0,caption:!1,captionText:"captionText",useClassName:!1,className:"",styles:[{selector:"tbody>tr>:nth-child(1)",styles:"text-align: left"}],columnSettings:[{useWidth:!1,width:0,widthUnits:"px",align:"no align"},{useWidth:!1,width:0,widthUnits:"px",align:"no align"},{useWidth:!1,width:0,widthUnits:"px",align:"no align"},{useWidth:!1,width:0,widthUnits:"px",align:"no align"}],colgroupProps:[{span:1},{span:1},{span:1},{span:1}],headerContent:[{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}],content:[[{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}],[{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}],[{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}]]};const w=new Promise(((t,e)=>{b=JSON.parse(localStorage.getItem("savedState")),b?t("Save state found."):e("No save state.")}));w.then((()=>{h=b,m()})),w.catch((()=>{console.log("No local state"),m()}));const m=()=>{g(h),n(h),o(h),document.getElementById("loading-modal").classList.add("display-none")}}();
