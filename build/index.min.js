!function(){"use strict";const e={state:{loading:!0,columns:5,rows:5,header:!0,caption:!1,captionText:" captionText ",headerContent:[{innerHTML:"innerHTML"},{innerHTML:"innerHTML"},{innerHTML:"innerHTML"},{innerHTML:"innerHTML"},{innerHTML:"innerHTML"}],content:[[{innerHTML:"innerHTML"},{innerHTML:"innerHTML"},{innerHTML:"innerHTML"},{innerHTML:"innerHTML"},{innerHTML:"innerHTML"}],[{innerHTML:"innerHTML"},{innerHTML:"innerHTML"},{innerHTML:"innerHTML"},{innerHTML:"innerHTML"},{innerHTML:"innerHTML"}],[{innerHTML:"innerHTML"},{innerHTML:"innerHTML"},{innerHTML:"innerHTML"},{innerHTML:"innerHTML"},{innerHTML:"innerHTML"}],[{innerHTML:"innerHTML"},{innerHTML:"innerHTML"},{innerHTML:"innerHTML"},{innerHTML:"innerHTML"},{innerHTML:"innerHTML"}],[{innerHTML:"innerHTML"},{innerHTML:"innerHTML"},{innerHTML:"innerHTML"},{innerHTML:"innerHTML"},{innerHTML:"innerHTML"}]]},addState:(e,t)=>state[e]=t,removeState:e=>delete state[e],updateState:(e,t)=>state[e]=t},t=(e,t,n,r,o,a,i,c)=>{if("string"==typeof t&&(t=document.getElementById(t)),!e||!t)return void console.log("createElement requires type and parent params!");let l=document.createElement(e);if("input"===e){"checkbox"===c.type&&(l.setAttribute("type",c.type),l.setAttribute("name",c.name),l.setAttribute("value",c.value),l.checked=c.checked);const e=document.createElement("div"),r=document.createElement("label");r.setAttribute("for",n),r.innerHTML=c.value,e.appendChild(r),t.appendChild(e),t=e}n&&l.setAttribute("id",`${n}`),r&&l.setAttribute("class",`${r}`),o&&l.setAttribute("contenteditable","true"),a&&(l.innerHTML=a),i&&l.addEventListener(i.type,(e=>{i.func(e)})),t.appendChild(l)},n=(e,t)=>{t||(t=document.getElementById("table-code"));let n="";const r=e=>"Â ".repeat(e);if(n+="&lt;table&gt<br>",e.caption&&(n+=`${r(2)}&lt;caption&gt${e.captionText}&lt;/caption&gt<br>`),e.header){n+=`${r(2)}&lt;thead&gt<br>${r(4)}&lt;tr&gt<br>`;for(let t=0;t<e.columns;t++)n+=`${r(6)}&lt;th&gt${e.headerContent[t].innerHTML}&lt;/th&gt<br>`;n+=`${r(4)}&lt;/tr&gt<br>${r(2)}&lt;/thead&gt<br>`}n+=`${r(2)}&lt;tbody&gt<br>`;for(let t=0;t<e.rows;t++){n+=`${r(4)}&lt;tr&gt<br>`;for(let o=0;o<e.columns;o++)n+=`${r(6)}&lt;td&gt${e.content[t][o].innerHTML}&lt;/td&gt<br>`;n+=`${r(4)}&lt;/tr&gt<br>`}n+=`${r(2)}&lt;/tbody&gt<br>`,n+="&lt;/table&gt<br>",t.innerHTML=n},r=e=>{const{state:o}=e,a=document.getElementById("table-code");let i=document.getElementById("editor-table-container"),c=document.getElementById("editor-area");i.parentNode.removeChild(i),i=document.createElement("div"),i.setAttribute("id","editor-table-container"),c.appendChild(i);const l=()=>{localStorage.setItem("savedState",JSON.stringify(o)),n(e.state,a),r(e)};if(t("div",i,"editor-table-container"),t("table","editor-table-container","editor-table","editor-table"),t("button","editor-table-container","add-row","add-row-button",!1,"Add Row",{type:"click",func:()=>{o.rows++,o.content.push(((e,t)=>{let{columns:n}=e.tables[t],r=[];for(let e=0;e<n;e++)r.push({innerHTML:" hi "});return r})(e.state,index)),l()}}),t("button","editor-table-container","remove-row","remove-row-button",!1,"Remove Row",{type:"click",func:()=>{o.rows>0&&o.rows--,o.content.pop(),l()}}),t("button","editor-table-container","add-column","add-column-button",!1,"Add Column",{type:"click",func:()=>{const e={innerHTML:"col"};o.header&&o.headerContent.push(e),o.content.forEach((t=>{t.push(e)})),o.columns++,l()}}),t("button","editor-table-container","remove-column","remove-column-button",!1,"Remove Column",{type:"click",func:()=>{o.header&&o.headerContent.pop(),o.content.forEach((e=>{e.pop()})),o.columns>0&&o.columns--,l()}}),t("input","editor-table-container","caption-toggle","caption-toggle",!1,!1,{type:"click",func:e=>{o.caption=!o.caption,e.target.checked?console.log("checked"):console.log("not checked"),l()}},{type:"checkbox",name:"captionToggle",value:"Toggle caption",checked:o.caption}),t("input","editor-table-container","header-toggle","header-toggle",!1,!1,{type:"click",func:()=>{o.header=!o.header,l()}},{type:"checkbox",name:"headerToggle",value:"Table header",checked:o.header}),o.caption&&t("caption","editor-table","table-caption",!1,!0,o.captionText,{type:"input",func:t=>{o.captionText=t.target.textContent,localStorage.setItem("savedState",JSON.stringify(o)),n(e.state,a)}}),o.header){t("thead","editor-table","table-head"),t("tr","table-head","table-header");for(let r=0;r<o.columns;r++)t("th","table-header",!1,!1,!0,o.headerContent[r].innerHTML,{type:"input",func:t=>{o.headerContent[r].innerHTML=t.target.textContent,localStorage.setItem("savedState",JSON.stringify(o)),n(e.state,a)}})}for(let r=0;r<o.rows;r++){t("tbody","editor-table","table-body"),t("tr","table-body",`table-row-${r}`);for(let i=0;i<o.columns;i++)t("td",`table-row-${r}`,`td-${r}${i}`,!1,!0,o.content[r][i].innerHTML,{type:"input",func:t=>{o.content[r][i].innerHTML=t.target.textContent,localStorage.setItem("savedState",JSON.stringify(o)),n(e.state,a)}})}};document.getElementById("add-row"),document.getElementById("add-column");const o=document.getElementById("copy-table-code"),a=document.getElementById("table-code");let i="";const c=new Promise(((e,t)=>{i=JSON.parse(localStorage.getItem("savedState")),i?e("Save state found."):t("No save state.")}));c.then((()=>{e.state=i,l()})),c.catch((()=>{console.log("No local state"),l()}));const l=()=>{r(e),n(e.state,a),o.addEventListener("click",(()=>{(e=>{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)})(a.innerHTML.replace(/<br\s*[\/]?>/gi,"\n").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," "))}))}}();
