!function(){"use strict";const e={state:{loading:!0,header:!0,caption:!1,captionText:"captionText",headerContent:[{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}],content:[[{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}],[{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}],[{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}],[{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}]]},addState:(e,t)=>state[e]=t,removeState:e=>delete state[e],updateState:(e,t)=>state[e]=t},t=(e,t,n,o,l,i,r,a,c,s,p)=>{if("string"==typeof t&&(t=document.getElementById(t)),!e||!t)return void console.log("createElement requires type and parent params!");let d=document.createElement(e);if("input"===e){"checkbox"===a.type&&(d.setAttribute("type",a.type),d.setAttribute("name",a.name),d.setAttribute("value",a.value),d.checked=a.checked);const e=document.createElement("div"),o=document.createElement("label");o.setAttribute("for",n),o.innerHTML=a.value,e.appendChild(o),t.appendChild(e),t=e}n&&d.setAttribute("id",`${n}`),o&&d.setAttribute("class",`${o}`),l&&d.setAttribute("contenteditable","true"),c&&d.setAttribute("rowspan",c),s&&d.setAttribute("colspan",s),i&&(d.innerHTML=i),r&&d.addEventListener(r.type,(e=>{r.func(e)})),p&&d.setAttribute("disabled","true"),t.appendChild(d)},n=(e,t)=>{if("string"==typeof e)return e=t?(e=(e=(e=e.replace(/\[\/]?n/g,"<br>")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/ /g,"&nbsp;"):(e=(e=(e=e.replace(/<br\s*[\/]?>/gi,"\n")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&nbsp;/g," ");console.log("Not string, is "+typeof e)},o=(e,t)=>{t||(t=document.getElementById("table-code"));let o="";const l=e=>"Â ".repeat(e);if(o+="&lt;table&gt<br>",e.caption&&(o+=`${l(2)}&lt;caption&gt${e.captionText}&lt;/caption&gt<br>`),e.header){o+=`${l(2)}&lt;thead&gt<br>${l(4)}&lt;tr&gt<br>`;for(let t=0;t<e.headerContent.length;t++)o+=`${l(6)}&lt;th&gt${e.headerContent[t].innerHTML}&lt;/th&gt<br>`;o+=`${l(4)}&lt;/tr&gt<br>${l(2)}&lt;/thead&gt<br>`}o+=`${l(2)}&lt;tbody&gt<br>`;for(let t=0;t<e.content.length;t++){o+=`${l(4)}&lt;tr&gt<br>`;for(let i=0;i<e.content[t].length;i++)e.content[t][i].colCollision||e.content[t][i].rowCollision||(o+=`${l(6)}&lt;td`,e.content[t][i].rowspan>1&&(o+=` rowspan="${e.content[t][i].rowspan}"`),e.content[t][i].colspan>1&&(o+=` colspan="${e.content[t][i].colspan}"`),o+=`&gt${n(e.content[t][i].innerHTML,!0)}&lt;/td&gt<br>`);o+=`${l(4)}&lt;/tr&gt<br>`}return o+=`${l(2)}&lt;/tbody&gt<br>`,o+="&lt;/table&gt<br>",t.innerHTML=o,o},l=e=>{let t=[];for(let n=0;n<e.content[0].length;n++)t.push({innerHTML:" hi ",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1});return t},i=e=>{const{state:n}=e;let o=document.getElementById("preview-table");if(o&&o.parentNode.removeChild(o),t("table","preview","preview-table"),n.caption&&t("caption","preview-table","table-caption",!1,!0,n.captionText),n.header){t("thead","preview-table","preview-table-head"),t("tr","preview-table-head","preview-table-header");for(let e=0;e<n.headerContent.length;e++)t("th","preview-table-header",!1,!1,!1,n.headerContent[e].innerHTML)}t("tbody","preview-table","preview-table-body");for(let e=0;e<n.content.length;e++){t("tr","preview-table-body",`preview-table-row-${e}`);for(let o=0;o<n.content[e].length;o++)n.content[e][o].rowCollision||n.content[e][o].colCollision||t("td",`preview-table-row-${e}`,`preview-td-${e}${o}`,!1,!1,n.content[e][o].innerHTML,!1,!1,n.content[e][o].rowspan,n.content[e][o].colspan)}},r=e=>{const{state:n}=e,a=document.getElementById("table-code");let c=document.getElementById("editor-table-container"),s=document.getElementById("editor-area");c.parentNode.removeChild(c),c=document.createElement("div"),c.setAttribute("id","editor-table-container"),s.appendChild(c);const p=()=>{localStorage.setItem("savedState",JSON.stringify(n)),r(e),i(e),o(e.state,a)},d=(e,t,o,l)=>{const i=n.content[e][t].rowspan,r=n.content[e][t].colspan;if(i>1)for(let a=l;a<i;a++)for(let l=0;l<r;l++)n.content[e+a][t+l].rowCollision=o;if(r>1)for(let a=l;a<r;a++)for(let l=0;l<i;l++)n.content[e+l][t+a].colCollision=o};if(t("div",c,"editor-table-container"),t("table","editor-table-container","editor-table","editor-table"),t("button","editor-table-container","add-row","add-row-button",!1,"Add Row",{type:"click",func:()=>{n.content.push(l(e.state)),p()}}),t("button","editor-table-container","remove-row","remove-row-button",!1,"Remove Row",{type:"click",func:()=>{for(let e=0;e<n.content.at(-1).length;e++)if(!0===n.content.at(-1)[e].rowCollision)return void alert("Rowspan detected, cannot delete row. Remove rowspan first.");n.content.length>1&&n.content.pop(),p()}}),t("button","editor-table-container","add-column","add-column-button",!1,"Add Column",{type:"click",func:()=>{n.headerContent.push({innerHTML:"col",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}),e.state.content.forEach((e=>e.push({innerHTML:"col",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}))),p()}}),t("button","editor-table-container","remove-column","remove-column-button",!1,"Remove Column",{type:"click",func:()=>{for(let e=0;e<n.content.length;e++)if(!0===n.content[e].at(-1).colCollision)return void alert("Colspan detected, cannot delete column. Remove colspan first.");n.headerContent.length>1&&n.headerContent.pop(),n.content.forEach((e=>{e.length>1&&e.pop()})),p()}}),t("input","editor-table-container","caption-toggle","caption-toggle",!1,!1,{type:"click",func:()=>{n.caption=!n.caption,p()}},{type:"checkbox",name:"captionToggle",value:"Toggle caption",checked:n.caption}),t("input","editor-table-container","header-toggle","header-toggle",!1,!1,{type:"click",func:()=>{n.header=!n.header,p()}},{type:"checkbox",name:"headerToggle",value:"Table header",checked:n.header}),n.caption&&t("caption","editor-table","table-caption",!1,!0,n.captionText,{type:"input",func:t=>{n.captionText=t.target.textContent,localStorage.setItem("savedState",JSON.stringify(n)),o(e.state,a),i(e)}}),n.header){t("thead","editor-table","table-head"),t("tr","table-head","table-header");for(let l=0;l<n.headerContent.length;l++)t("th","table-header",!1,!1,!0,n.headerContent[l].innerHTML,{type:"input",func:t=>{n.headerContent[l].innerHTML=t.target.textContent,localStorage.setItem("savedState",JSON.stringify(n)),o(e.state,a),i(e)}})}t("tbody","editor-table","table-body");for(let r=0;r<n.content.length;r++){t("tr","table-body",`table-row-${r}`);for(let c=0;c<n.content[r].length;c++)n.content[r][c].rowCollision||n.content[r][c].colCollision||(t("td",`table-row-${r}`,`td-${r}${c}`,!1,!1,!1,!1,n.content[r][c].rowspan,n.content[r][c].colspan),t("span",`td-${r}${c}`,`td-editable-${r}${c}`,"td-editable",!0,n.content[r][c].innerHTML,{type:"input",func:t=>{n.content[r][c].innerHTML=t.target.innerHTML,console.log(n.content[r][c].innerHTML=t.target.innerHTML),localStorage.setItem("savedState",JSON.stringify(n)),o(e.state,a),i(e)}}),d(r,c,!0,1),t("button",`td-${r}${c}`,`increase-rowspan-button-${r}${c}`,"increase-rowspan-button",!1,"RS+",{type:"click",func:()=>{let t=0;for(let e=0;e<n.content.length-1;e++)n.content[e][c].rowCollision||(t+=n.content[e][c].rowspan);(t>=n.content.length||r===n.content.length-1)&&n.content.push(l(e.state)),n.content[r][c].rowspan++,d(r,c,!0,1),p()}}),t("button",`td-${r}${c}`,`decrease-rowspan-button-${r}${c}`,"decrease-rowspan-button",!1,"RS-",{type:"click",func:()=>{d(r,c,!1,0),n.content[r][c].rowspan--,p()}},!1,!1,!1,!(n.content[r][c].rowspan>1)),t("button",`td-${r}${c}`,`increase-colspan-button-${r}${c}`,"increase-colspan-button",!1,"CS+",{type:"click",func:()=>{let t=0;for(let e=0;e<n.content[r].length-1;e++)n.content[r][e].colCollision||(t+=n.content[r][e].colspan);(t>=n.content[r].length||c===n.content[r].length-1)&&(n.headerContent.push({innerHTML:"col",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}),e.state.content.forEach((e=>e.push({innerHTML:"col",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1})))),n.content[r][c].colspan++,d(r,c,!0,1),p()}}),t("button",`td-${r}${c}`,`decrease-colspan-button-${r}${c}`,"decrease-colspan-button",!1,"CS-",{type:"click",func:()=>{d(r,c,!1,0),n.content[r][c].colspan--,p()}},!1,!1,!1,!(n.content[r][c].colspan>1)))}};let a="";const c=new Promise(((e,t)=>{a=JSON.parse(localStorage.getItem("savedState")),a?e("Save state found."):t("No save state.")}));c.then((()=>{e.state=a,s()})),c.catch((()=>{console.log("No local state"),s()}));const s=()=>{const t=document.getElementById("copy-table-code"),l=document.getElementById("table-code"),a=document.getElementById("loading-modal");r(e),o(e.state,l),i(e),t.addEventListener("click",(()=>{(e=>{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)})(n(l.innerHTML))})),a.classList.add("display-none")}}();
