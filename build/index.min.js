!function(){"use strict";const e={state:{loading:!0,header:!0,colgroup:!0,caption:!1,captionText:"captionText",colgroupProps:[{width:0,widthUnits:"px",span:1},{width:0,widthUnits:"px",span:1},{width:0,widthUnits:"px",span:1},{width:0,widthUnits:"px",span:1},{width:0,widthUnits:"px",span:1}],headerContent:[{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}],content:[[{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}],[{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}],[{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}],[{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}]]},addState:(e,t)=>state[e]=t,removeState:e=>delete state[e],updateState:(e,t)=>state[e]=t},t=(e={type:n,id:o,parent:r,innerHTML:l,inputProps:i,eventObject:a,attrs:c})=>{let t,{type:n,id:o,parent:r,innerHTML:l,inputProps:i,eventObject:a,attrs:c}=e;if(!n||!r)return;"string"==typeof r&&(r=document.getElementById(r));let p=document.createElement(n);if("input"===n){i.checked&&(p.checked=i.checked),p.type=i.type,t=i.container?document.createElement(i.container):document.createElement("div");const e=document.createElement("label");e.setAttribute("for",o),e.innerHTML=i.value,t.appendChild(e),r.appendChild(t),r=t,i.min&&p.setAttribute("min",i.min),i.max&&p.setAttribute("max",i.max)}if(o&&p.setAttribute("id",`${o}`),c)for(let e=0;e<c.length;e++)p.setAttribute(c[e].attr,c[e].value),"disabled"===c[e].attr&&"false"===c[e].value&&p.removeAttribute("disabled");l&&(p.innerHTML=l),a&&p.addEventListener(a.listener,(e=>{a.func(e)})),r.appendChild(p)},n=(e,t)=>"string"!=typeof e?'replaceHTML error: Parameter "text" not a string.':(t?"&lt;br&gt;"===(e=(e=(e=(e=e.replace(/\[\/]?n/g,"<br>")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/ /g,"&nbsp;")).substr(e.length-10)&&(e=e.slice(0,-10)):e=(e=(e=(e=e.replace(/<br\s*[\/]?>/gi,"\n")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&nbsp;/g," "),e),o=(e,t)=>{t||(t=document.getElementById("table-code"));let o="";const r=e=>"Â ".repeat(e);if(o+="&lt;table&gt<br>",e.caption&&(o+=`${r(2)}&lt;caption&gt${e.captionText}&lt;/caption&gt<br>`),e.header){o+=`${r(2)}&lt;thead&gt<br>${r(4)}&lt;tr&gt<br>`;for(let t=0;t<e.headerContent.length;t++)o+=`${r(6)}&lt;th&gt${e.headerContent[t].innerHTML}&lt;/th&gt<br>`;o+=`${r(4)}&lt;/tr&gt<br>${r(2)}&lt;/thead&gt<br>`}o+=`${r(2)}&lt;tbody&gt<br>`;for(let t=0;t<e.content.length;t++){o+=`${r(4)}&lt;tr&gt<br>`;for(let l=0;l<e.content[t].length;l++)e.content[t][l].colCollision||e.content[t][l].rowCollision||(o+=`${r(6)}&lt;td`,e.content[t][l].rowspan>1&&(o+=` rowspan="${e.content[t][l].rowspan}"`),e.content[t][l].colspan>1&&(o+=` colspan="${e.content[t][l].colspan}"`),o+=`&gt${n(e.content[t][l].innerHTML,!0)}&lt;/td&gt<br>`);o+=`${r(4)}&lt;/tr&gt<br>`}return o+=`${r(2)}&lt;/tbody&gt<br>`,o+="&lt;/table&gt<br>",t.innerHTML=o,o},r=e=>{let t=[];for(let n=0;n<e.content[0].length;n++)t.push({innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1});return t},l=e=>{const{state:n}=e;let o=document.getElementById("preview-table");if(o&&o.parentNode.removeChild(o),t({type:"table",id:"preview-table",parent:"preview"}),n.caption&&t({type:"caption",id:"preview-table-caption",parent:"preview-table",innerHTML:n.captionText}),n.header){t({type:"thead",id:"preview-thead",parent:"preview-table"}),t({type:"tr",id:"preview-thead-row",parent:"preview-thead"});for(let e=0;e<n.headerContent.length;e++)t({type:"th",parent:"preview-thead-row",innerHTML:n.headerContent[e].innerHTML})}t({type:"tbody",id:"preview-tbody",parent:"preview-table"});for(let e=0;e<n.content.length;e++){t({type:"tr",id:`preview-table-row-${e}`,parent:"preview-tbody"});for(let o=0;o<n.content[e].length;o++)n.content[e][o].rowCollision||n.content[e][o].colCollision||t({type:"td",id:`preview-td-${e}${o}`,parent:`preview-table-row-${e}`,innerHTML:n.content[e][o].innerHTML,attrs:[{attr:"rowspan",value:n.content[e][o].rowspan},{attr:"colspan",value:n.content[e][o].colspan}]})}},i=e=>{const{state:n}=e,a=document.getElementById("table-code"),c=document.getElementById("editor-table-container"),p=document.getElementById("editor-area");c.parentNode.removeChild(c);const s=t=>{localStorage.setItem("savedState",JSON.stringify(n)),t&&i(e),o(e.state,a),l(e)},d=(e,t,o,r)=>{const l=n.content[e][t].rowspan,i=n.content[e][t].colspan;if(l>1)for(let a=r;a<l;a++)for(let r=0;r<i;r++)n.content[e+a][t+r].rowCollision=o;if(i>1)for(let a=r;a<i;a++)for(let r=0;r<l;r++)n.content[e+r][t+a].colCollision=o};if(t({type:"div",id:"editor-table-container",parent:p}),t({type:"table",id:"editor-table",parent:"editor-table-container",attrs:[{attr:"class",value:"editor-table"}]}),t({type:"button",id:"add-row",parent:"editor-table-container",innerHTML:"add row",eventObject:{listener:"click",func:()=>{n.content.push(r(e.state)),s(!0)}}}),t({type:"button",id:"remove-row",parent:"editor-table-container",innerHTML:"remove row",eventObject:{listener:"click",func:()=>{for(let e=0;e<n.content.at(-1).length;e++)if(!0===n.content.at(-1)[e].rowCollision)return void alert("Rowspan detected, cannot delete row. Remove rowspan first.");n.content.length>1&&n.content.pop(),s(!0)}}}),t({type:"button",id:"add-column",parent:"editor-table-container",innerHTML:"add column",attrs:[{attr:"class",value:"add-column"}],eventObject:{listener:"click",func:()=>{n.colgroupProps.push({width:0,widthUnits:"px"}),n.headerContent.push({innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}),e.state.content.forEach((e=>e.push({innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}))),s(!0)}}}),t({type:"button",id:"remove-column",parent:"editor-table-container",innerHTML:"remove column",eventObject:{listener:"click",func:()=>{for(let e=0;e<n.content.length;e++)if(!0===n.content[e].at(-1).colCollision)return void alert("Colspan detected, cannot delete column. Remove colspan first.");n.colgroupProps.length>1&&n.colgroupProps.pop(),n.headerContent.length>1&&n.headerContent.pop(),n.content.forEach((e=>{e.length>1&&e.pop()})),s(!0)}}}),t({type:"input",id:"caption-toggle",parent:"editor-table-container",attrs:[{attr:"type",value:"checkbox"},{attr:"name",value:"captionToggle"},{attr:"value",value:"Toggle caption"}],inputProps:{type:"checkbox",name:"captionToggle",value:"Toggle Caption",checked:n.caption},eventObject:{listener:"click",func:()=>{n.caption=!n.caption,s(!0)}}}),t({type:"input",id:"colgroup-toggle",parent:"editor-table-container",inputProps:{type:"checkbox",name:"colgroupToggle",value:"Colgroup",checked:n.colgroup},eventObject:{listener:"click",func:()=>{n.colgroup=!n.colgroup,console.log(n.colgroup),s(!0)}}}),t({type:"input",id:"header-toggle",parent:"editor-table-container",inputProps:{type:"checkbox",name:"headerToggle",value:"Table header",checked:n.header},eventObject:{listener:"click",func:()=>{n.header=!n.header,s(!0)}}}),n.caption&&t({type:"caption",id:"table-caption",parent:"editor-table",innerHTML:n.captionText,attrs:[{attr:"contenteditable",value:"true"}],eventObject:{listener:"input",func:e=>{n.captionText=e.target.textContent,s()}}}),n.colgroup){t({type:"tr",id:"editor-colgroup-settings",parent:"editor-table"}),t({type:"colgroup",id:"editor-table-colgroup",parent:"editor-table"});for(let e=0;e<n.colgroupProps.length;e++)t({type:"col",id:`colgroupItem-${e}`,parent:"editor-table-colgroup",attrs:[{attr:"width",value:n.colgroupProps[e].width+n.colgroupProps[e].widthUnits},{attr:"span",value:n.colgroupProps[e].span+""}]}),t({type:"input",id:`col-width-input-${e}`,parent:"editor-colgroup-settings",inputProps:{type:"number",container:"col",name:`columnWidth-${e}`,value:"0",checked:n.caption,min:0,max:1e3}})}if(n.header){t({type:"thead",id:"table-header",parent:"editor-table"}),t({type:"tr",id:"table-header-row",parent:"table-header"});for(let e=0;e<n.headerContent.length;e++)t({type:"th",id:`table-header-row-cell-${e}`,parent:"table-header-row",innerHTML:n.headerContent[e].innerHTML,attrs:[{attr:"contenteditable",value:"true"}],eventObject:{listener:"input",func:t=>{n.headerContent[e].innerHTML=t.target.textContent,s()}}})}t({type:"tbody",id:"table-body",parent:"editor-table"});for(let o=0;o<n.content.length;o++){t({type:"tr",id:`table-row-${o}`,parent:"table-body"});for(let l=0;l<n.content[o].length;l++)n.content[o][l].rowCollision||n.content[o][l].colCollision||(d(o,l,!0,1),t({type:"td",id:`td-${o}${l}`,parent:`table-row-${o}`,attrs:[{attr:"rowspan",value:n.content[o][l].rowspan},{attr:"colspan",value:n.content[o][l].colspan}]}),t({type:"p",id:`p-${o}${l}`,parent:`td-${o}${l}`,innerHTML:n.content[o][l].innerHTML,attrs:[{attr:"classname",value:"td-p"},{attr:"contenteditable",value:"true"}],eventObject:{listener:"input",func:e=>{n.content[o][l].innerHTML=e.target.innerHTML,s()}}}),t({type:"button",id:`increase-rowspan-button-${o}${l}`,parent:`td-${o}${l}`,innerHTML:"RS+",attrs:[{attr:"classname",value:"increase-rowspan-button"}],eventObject:{listener:"click",func:()=>{let t=0;for(let e=0;e<n.content.length-1;e++)n.content[e][l].rowCollision||(t+=n.content[e][l].rowspan);(t>=n.content.length||o===n.content.length-1)&&n.content.push(r(e.state)),n.content[o][l].rowspan++,d(o,l,!0,1),s(!0)}}}),t({type:"button",id:`decrease-rowspan-button-${o}${l}`,parent:`td-${o}${l}`,innerHTML:"RS-",attrs:[{attr:"classname",value:"decrease-rowspan-button"},{attr:"disabled",value:n.content[o][l].rowspan>1?"false":"true"}],eventObject:{listener:"click",func:()=>{d(o,l,!1,0),n.content[o][l].rowspan--,s(!0)}}}),t({type:"button",id:`increase-colspan-button-${o}${l}`,parent:`td-${o}${l}`,innerHTML:"CS+",eventObject:{listener:"click",func:()=>{let t=0;for(let e=0;e<n.content[o].length-1;e++)n.content[o][e].colCollision||(t+=n.content[o][e].colspan);(t>=n.content[o].length||l===n.content[o].length-1)&&(n.headerContent.push({innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}),e.state.content.forEach((e=>e.push({innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1})))),n.content[o][l].colspan++,d(o,l,!0,1),s(!0)}}}),t({type:"button",id:`decrease-colspan-button-${o}${l}`,parent:`td-${o}${l}`,innerHTML:"CS-",attrs:[{attr:"classname",value:"decrease-colspan-button"},{attr:"disabled",value:n.content[o][l].colspan>1?"false":"true"}],eventObject:{listener:"click",func:()=>{d(o,l,!1,0),n.content[o][l].colspan--,s(!0)}}}))}};let a="";const c=new Promise(((e,t)=>{a=JSON.parse(localStorage.getItem("savedState")),a?e("Save state found."):t("No save state.")}));c.then((()=>{e.state=a,p()})),c.catch((()=>{console.log("No local state"),p()}));const p=()=>{const t=document.getElementById("copy-table-code"),r=document.getElementById("table-code"),a=document.getElementById("loading-modal");i(e),o(e.state,r),l(e),t.addEventListener("click",(()=>{(e=>{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)})(n(r.innerHTML))})),a.classList.add("display-none")}}();
