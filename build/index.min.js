!function(){"use strict";const e={state:{loading:!0,header:!0,caption:!1,captionText:" captionText ",headerContent:[{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1}],content:[[{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1}],[{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1}],[{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1}],[{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1}],[{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1}]]},addState:(e,n)=>state[e]=n,removeState:e=>delete state[e],updateState:(e,n)=>state[e]=n},n=(e,n,t,o,r,a,i,c,l,d,p)=>{if("string"==typeof n&&(n=document.getElementById(n)),!e||!n)return void console.log("createElement requires type and parent params!");let s=document.createElement(e);if("input"===e){"checkbox"===c.type&&(s.setAttribute("type",c.type),s.setAttribute("name",c.name),s.setAttribute("value",c.value),s.checked=c.checked);const e=document.createElement("div"),o=document.createElement("label");o.setAttribute("for",t),o.innerHTML=c.value,e.appendChild(o),n.appendChild(e),n=e}t&&s.setAttribute("id",`${t}`),o&&s.setAttribute("class",`${o}`),r&&s.setAttribute("contenteditable","true"),l&&s.setAttribute("rowspan",l),d&&s.setAttribute("colspan",d),a&&(s.innerHTML=a),i&&s.addEventListener(i.type,(e=>{i.func(e)})),p&&s.setAttribute("disabled","true"),n.appendChild(s)},t=(e,n)=>{n||(n=document.getElementById("table-code"));let t="";const o=e=>"Â ".repeat(e);if(t+="&lt;table&gt<br>",e.caption&&(t+=`${o(2)}&lt;caption&gt${e.captionText}&lt;/caption&gt<br>`),e.header){t+=`${o(2)}&lt;thead&gt<br>${o(4)}&lt;tr&gt<br>`;for(let n=0;n<e.columns;n++)t+=`${o(6)}&lt;th&gt${e.headerContent[n].innerHTML}&lt;/th&gt<br>`;t+=`${o(4)}&lt;/tr&gt<br>${o(2)}&lt;/thead&gt<br>`}t+=`${o(2)}&lt;tbody&gt<br>`;for(let n=0;n<e.content.length;n++){t+=`${o(4)}&lt;tr&gt<br>`;for(let r=0;r<e.content[n].length;r++)t+=`${o(6)}&lt;td&gt${e.content[n][r].innerHTML}&lt;/td&gt<br>`;t+=`${o(4)}&lt;/tr&gt<br>`}t+=`${o(2)}&lt;/tbody&gt<br>`,t+="&lt;/table&gt<br>",n.innerHTML=t},o=e=>{let n=[];for(let t=0;t<e.content[0].length;t++)n.push({innerHTML:" hi ",rowspan:0,ignore:!1});return n},r=e=>{const{state:a}=e,i=document.getElementById("table-code");let c=document.getElementById("editor-table-container"),l=document.getElementById("editor-area");c.parentNode.removeChild(c),c=document.createElement("div"),c.setAttribute("id","editor-table-container"),l.appendChild(c);const d=()=>{localStorage.setItem("savedState",JSON.stringify(a)),t(e.state,i),r(e)};if(n("div",c,"editor-table-container"),n("table","editor-table-container","editor-table","editor-table"),n("button","editor-table-container","add-row","add-row-button",!1,"Add Row",{type:"click",func:()=>{a.content.push(o(e.state)),d()}}),n("button","editor-table-container","remove-row","remove-row-button",!1,"Remove Row",{type:"click",func:()=>{a.content.length>1&&a.content.pop(),d()}}),n("button","editor-table-container","add-column","add-column-button",!1,"Add Column",{type:"click",func:()=>{const e={innerHTML:"col"};a.header&&a.headerContent.push(e),a.content.forEach((n=>{n.push(e)})),d()}}),n("button","editor-table-container","remove-column","remove-column-button",!1,"Remove Column",{type:"click",func:()=>{a.header&&a.headerContent.length>1&&a.headerContent.pop(),a.content.forEach((e=>{e.length>1&&e.pop()})),d()}}),n("input","editor-table-container","caption-toggle","caption-toggle",!1,!1,{type:"click",func:e=>{a.caption=!a.caption,e.target.checked?console.log("checked"):console.log("not checked"),d()}},{type:"checkbox",name:"captionToggle",value:"Toggle caption",checked:a.caption}),n("input","editor-table-container","header-toggle","header-toggle",!1,!1,{type:"click",func:()=>{a.header=!a.header,d()}},{type:"checkbox",name:"headerToggle",value:"Table header",checked:a.header}),a.caption&&n("caption","editor-table","table-caption",!1,!0,a.captionText,{type:"input",func:n=>{a.captionText=n.target.textContent,localStorage.setItem("savedState",JSON.stringify(a)),t(e.state,i)}}),a.header){n("thead","editor-table","table-head"),n("tr","table-head","table-header");for(let o=0;o<a.headerContent.length;o++)n("th","table-header",!1,!1,!0,a.headerContent[o].innerHTML,{type:"input",func:n=>{a.headerContent[o].innerHTML=n.target.textContent,localStorage.setItem("savedState",JSON.stringify(a)),t(e.state,i)}})}for(let r=0;r<a.content.length;r++){n("tbody","editor-table","table-body"),n("tr","table-body",`table-row-${r}`);for(let c=0;c<a.content[r].length;c++){if(1==a.content[r][c].ignore)continue;if(a.content[r][c].rowspan>1)for(let e=1;e<a.content[r][c].rowspan;e++)a.content[r+e][c].ignore=!0;n("td",`table-row-${r}`,`td-${r}${c}`,!1,!0,!1,{type:"input",func:n=>{a.content[r][c].innerHTML=n.target.value,localStorage.setItem("savedState",JSON.stringify(a)),t(e.state,i)}},!1,a.content[r][c].rowspan,a.content[r][c].colspan);let l=document.createElement("input"),p=document.getElementById(`td-${r}${c}`);l.value=a.content[r][c].innerHTML,p.appendChild(l),r<a.content.length-1&&n("button",`td-${r}${c}`,`increase-rowspan-button-${r}${c}`,"increase-rowspan-button",!1,"RS+",{type:"click",func:()=>{a.content[r][c].rowspan++;let n=0;for(let e=0;e<a.content.length-1;e++)n+=a.content[e][c].rowspan;n>=a.content.length&&a.content.push(o(e.state)),console.log(n),console.log(a.content.length),d()}},!1,!1,!1,!1)}}};document.getElementById("add-row"),document.getElementById("add-column");const a=document.getElementById("copy-table-code"),i=document.getElementById("table-code");let c="";const l=new Promise(((e,n)=>{c=JSON.parse(localStorage.getItem("savedState")),c?e("Save state found."):n("No save state.")}));l.then((()=>{e.state=c,d()})),l.catch((()=>{console.log("No local state"),d()}));const d=()=>{r(e),t(e.state,i),a.addEventListener("click",(()=>{(e=>{const n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n)})(i.innerHTML.replace(/<br\s*[\/]?>/gi,"\n").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," "))}))}}();
