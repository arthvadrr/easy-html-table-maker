!function(){"use strict";const e=(e={type:n,id:o,parent:l,innerHTML:r,inputProps:i,eventObject:a,attrs:c})=>{let t,{type:n,id:o,parent:l,innerHTML:r,inputProps:i,eventObject:a,attrs:c}=e;if(!n||!l)return;"string"==typeof l&&(l=document.getElementById(l));let p=document.createElement(n);if("input"===n){if(i.checked&&(p.checked=i.checked),p.type=i.type,t=i.container?document.createElement(i.container):document.createElement("div"),i.name&&p.setAttribute("name",i.name),i.label&&i.for){const e=document.createElement("label");e.setAttribute("for",i.for),e.innerHTML=i.label,t.appendChild(e),l.appendChild(t),l=t}i.value&&p.setAttribute("value",i.value),i.min&&p.setAttribute("min",i.min),i.max&&p.setAttribute("max",i.max),i.step&&p.setAttribute("step",i.step)}if(o&&p.setAttribute("id",`${o}`),c)for(let e=0;e<c.length;e++)p.setAttribute(c[e].attr,c[e].value),"disabled"===c[e].attr&&"false"===c[e].value&&p.removeAttribute("disabled");r&&(p.innerHTML=r),a&&p.addEventListener(a.listener,(e=>{a.func(e)})),l.appendChild(p)},t=(e,t)=>"string"!=typeof e?'replaceHTML error: Parameter "text" not a string.':(t?"&lt;br&gt;"===(e=(e=(e=(e=e.replace(/\[\/]?n/g,"<br>")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/ /g,"&nbsp;")).substr(e.length-10)&&(e=e.slice(0,-10)):e=(e=(e=(e=e.replace(/<br\s*[\/]?>/gi,"\n")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&nbsp;/g," "),e),n=n=>{let o="";const l=e=>"Â ".repeat(e),r=document.getElementById("table-code");if(o+="&lt;table&gt<br>",n.caption&&(o+=`${l(2)}&lt;caption&gt${n.captionText}&lt;/caption&gt<br>`),n.header){o+=`${l(2)}&lt;thead&gt<br>${l(4)}&lt;tr&gt<br>`;for(let e=0;e<n.headerContent.length;e++)o+=`${l(6)}&lt;th&gt${n.headerContent[e].innerHTML}&lt;/th&gt<br>`;o+=`${l(4)}&lt;/tr&gt<br>${l(2)}&lt;/thead&gt<br>`}o+=`${l(2)}&lt;tbody&gt<br>`;for(let e=0;e<n.content.length;e++){o+=`${l(4)}&lt;tr&gt<br>`;for(let r=0;r<n.content[e].length;r++)n.content[e][r].colCollision||n.content[e][r].rowCollision||(o+=`${l(6)}&lt;td`,n.content[e][r].rowspan>1&&(o+=` rowspan="${n.content[e][r].rowspan}"`),n.content[e][r].colspan>1&&(o+=` colspan="${n.content[e][r].colspan}"`),o+=`&gt${t(n.content[e][r].innerHTML,!0)}&lt;/td&gt<br>`);o+=`${l(4)}&lt;/tr&gt<br>`}return o+=`${l(2)}&lt;/tbody&gt<br>`,o+="&lt;/table&gt<br>",r.innerHTML=o,document.getElementById("copy-table-code")||e({type:"button",id:"copy-table-code",parent:"markup-controls",innerHTML:"Copy HTML",eventObject:{listener:"click",func:()=>{(e=>{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)})(t(r.innerHTML))}}}),o},o=t=>{let n=document.getElementById("preview-table");if(n&&n.parentNode.removeChild(n),e({type:"table",id:"preview-table",parent:"preview"}),t.caption&&e({type:"caption",id:"preview-table-caption",parent:"preview-table",innerHTML:t.captionText}),t.header){e({type:"thead",id:"preview-thead",parent:"preview-table"}),e({type:"tr",id:"preview-thead-row",parent:"preview-thead"});for(let n=0;n<t.headerContent.length;n++)e({type:"th",parent:"preview-thead-row",innerHTML:t.headerContent[n].innerHTML})}e({type:"tbody",id:"preview-tbody",parent:"preview-table"});for(let n=0;n<t.content.length;n++){e({type:"tr",id:`preview-table-row-${n}`,parent:"preview-tbody"});for(let o=0;o<t.content[n].length;o++)t.content[n][o].rowCollision||t.content[n][o].colCollision||e({type:"td",id:`preview-td-${n}${o}`,parent:`preview-table-row-${n}`,innerHTML:t.content[n][o].innerHTML,attrs:[{attr:"rowspan",value:t.content[n][o].rowspan},{attr:"colspan",value:t.content[n][o].colspan}]})}},l=()=>{const t=document.getElementById("editor-table-container");t.parentNode.removeChild(t),e({type:"div",id:"editor-table-container",parent:"editor-area"}),e({type:"table",id:"editor-table",parent:"editor-table-container",attrs:[{attr:"class",value:"editor-table"}]})},r=t=>{e({type:"div",id:"editor-table-controls",parent:"editor-table-container"}),e({type:"button",id:"add-row",parent:"editor-table-controls",innerHTML:"add row",eventObject:{listener:"click",func:()=>{t.content.push((e=>{let t=[];for(let n=0;n<e.content[0].length;n++)t.push({innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1});return t})(t)),d(t,!0)}}}),e({type:"button",id:"remove-row",parent:"editor-table-controls",innerHTML:"remove row",eventObject:{listener:"click",func:()=>{for(let e=0;e<t.content.at(-1).length;e++)if(!0===t.content.at(-1)[e].rowCollision)return void alert("Rowspan detected, cannot delete row. Remove rowspan first.");t.content.length>1&&t.content.pop(),d(t,!0)}}}),e({type:"button",id:"add-column",parent:"editor-table-controls",innerHTML:"add column",attrs:[{attr:"class",value:"add-column"}],eventObject:{listener:"click",func:()=>{t.colgroupProps.push({useWidth:!1,width:0,widthUnits:"px",span:1}),t.headerContent.push({innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}),t.content.forEach((e=>e.push({innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}))),d(t,!0)}}}),e({type:"button",id:"remove-column",parent:"editor-table-controls",innerHTML:"remove column",eventObject:{listener:"click",func:()=>{for(let e=0;e<t.content.length;e++)if(!0===t.content[e].at(-1).colCollision)return void alert("Colspan detected, cannot delete column. Remove colspan first.");t.colgroupProps.length>1&&t.colgroupProps.pop(),t.headerContent.length>1&&t.headerContent.pop(),t.content.forEach((e=>{e.length>1&&e.pop()})),d(t,!0)}}}),e({type:"input",id:"caption-toggle",parent:"editor-table-controls",attrs:[{attr:"type",value:"checkbox"},{attr:"name",value:"captionToggle"},{attr:"value",value:"Toggle caption"}],inputProps:{type:"checkbox",label:"Caption",name:"caption-toggle",for:"caption-toggle",value:"Toggle Caption",checked:t.caption},eventObject:{listener:"click",func:()=>{t.caption=!t.caption,d(t,!0)}}}),e({type:"input",id:"colgroup-toggle",parent:"editor-table-controls",inputProps:{type:"checkbox",label:"Colgroup",name:"colgroup-toggle",for:"colgroup-toggle",checked:t.colgroup},eventObject:{listener:"click",func:()=>{t.colgroup=!t.colgroup,d(t,!0)}}}),e({type:"input",id:"header-toggle",parent:"editor-table-controls",inputProps:{type:"checkbox",label:"Header",name:"header-toggle",for:"header-toggle",checked:t.header},eventObject:{listener:"click",func:()=>{t.header=!t.header,d(t,!0)}}})},i=t=>{t.caption&&e({type:"caption",id:"table-caption",parent:"editor-table",innerHTML:t.captionText,attrs:[{attr:"contenteditable",value:"true"}],eventObject:{listener:"input",func:e=>{t.captionText=e.target.textContent,d(t)}}})},a=t=>{if(t.colgroup){e({type:"colgroup",id:"editor-table-colgroup",parent:"editor-table",attrs:[{attr:"style",value:"display: table-header-group"}]});for(let n=0;n<t.colgroupProps.length;n++){e({type:"col",id:`colgroup-item-${n}`,parent:"editor-table-colgroup",attrs:[{attr:"width",value:!!t.colgroupProps[n].useWidth&&t.colgroupProps[n].width+t.colgroupProps[n].widthUnits},{attr:"span",value:t.colgroupProps[n].span?t.colgroupProps[n].span+"":1},{attr:"style",value:"display: table-cell"},{attr:"align",value:t.colgroupProps[n].align}]}),e({type:"div",id:`col-align-radio-group-${n}`,parent:`colgroup-item-${n}`,innerHTML:"Text align"});["left","center","right","Justify"].map(((o,l)=>{e({type:"input",id:`col-align-option-${n}${l}`,parent:`col-align-radio-group-${n}`,inputProps:{type:"radio",label:o,value:o,name:`align-options-${n}`,for:`col-align-option-${n}${l}`,checked:t.colgroupProps[n].align===o},eventObject:{listener:"click",func:e=>{t.colgroupProps[n].align=e.target.value,d(t,!0)}}})})),e({type:"input",id:`use-col-width-${n}`,parent:`colgroup-item-${n}`,inputProps:{type:"checkbox",label:"Use col width (deprecated)",for:`use-col-width-${n}`,checked:t.colgroupProps[n].useWidth},eventObject:{listener:"click",func:()=>{t.colgroupProps[n].useWidth=!t.colgroupProps[n].useWidth,d(t,!0)}}}),t.colgroupProps[n].useWidth&&(e({type:"input",id:`col-width-input-${n}`,parent:`colgroup-item-${n}`,inputProps:{type:"number",container:"div",for:`columnWidth-${n}`,label:"Col width",value:t.colgroupProps[n].width,min:0,max:1e3}}),e({type:"button",id:`col-width-${n}-set`,parent:`colgroup-item-${n}`,innerHTML:"Set",eventObject:{listener:"click",func:()=>{const e=document.getElementById(`col-width-input-${n}`).value;t.colgroupProps[n].width=e,d(t,!0)}}}))}}},c=t=>{if(t.header){e({type:"thead",id:"table-header",parent:"editor-table"}),e({type:"tr",id:"table-header-row",parent:"table-header"});for(let n=0;n<t.headerContent.length;n++)e({type:"th",id:`table-header-row-cell-${n}`,parent:"table-header-row",innerHTML:t.headerContent[n].innerHTML,attrs:[{attr:"contenteditable",value:"true"}],eventObject:{listener:"input",func:e=>{t.headerContent[n].innerHTML=e.target.textContent,d(t)}}})}},p=(e,t,n,o,l)=>{const r=e.content[t][n].rowspan,i=e.content[t][n].colspan;if(r>1)for(let a=l;a<r;a++)for(let l=0;l<i;l++)e.content[t+a][n+l].rowCollision=o;if(i>1)for(let a=l;a<i;a++)for(let l=0;l<r;l++)e.content[t+l][n+a].colCollision=o},s=t=>{e({type:"tbody",id:"table-body",parent:"editor-table"});for(let n=0;n<t.content.length;n++){e({type:"tr",id:`table-row-${n}`,parent:"table-body"});for(let o=0;o<t.content[n].length;o++)t.content[n][o].rowCollision||t.content[n][o].colCollision||(p(t,n,o,!0,1),e({type:"td",id:`td-${n}${o}`,parent:`table-row-${n}`,attrs:[{attr:"rowspan",value:t.content[n][o].rowspan},{attr:"colspan",value:t.content[n][o].colspan}]}),e({type:"p",id:`p-${n}${o}`,parent:`td-${n}${o}`,innerHTML:t.content[n][o].innerHTML,attrs:[{attr:"classname",value:"td-p"},{attr:"contenteditable",value:"true"}],eventObject:{listener:"input",func:e=>{t.content[n][o].innerHTML=e.target.innerHTML,d(t)}}}),e({type:"button",id:`increase-rowspan-button-${n}${o}`,parent:`td-${n}${o}`,innerHTML:"RS+",attrs:[{attr:"classname",value:"increase-rowspan-button"}],eventObject:{listener:"click",func:()=>{let e=0;for(let n=0;n<t.content.length-1;n++)t.content[n][o].rowCollision||(e+=t.content[n][o].rowspan);(e>=t.content.length||n===t.content.length-1)&&t.content.push(createTableRow(t)),t.content[n][o].rowspan++,p(t,n,o,!0,1),d(t,!0)}}}),e({type:"button",id:`decrease-rowspan-button-${n}${o}`,parent:`td-${n}${o}`,innerHTML:"RS-",attrs:[{attr:"classname",value:"decrease-rowspan-button"},{attr:"disabled",value:t.content[n][o].rowspan>1?"false":"true"}],eventObject:{listener:"click",func:()=>{p(t,n,o,!1,0),t.content[n][o].rowspan--,d(t,!0)}}}),e({type:"button",id:`increase-colspan-button-${n}${o}`,parent:`td-${n}${o}`,innerHTML:"CS+",eventObject:{listener:"click",func:()=>{let e=0;for(let o=0;o<t.content[n].length-1;o++)t.content[n][o].colCollision||(e+=t.content[n][o].colspan);(e>=t.content[n].length||o===t.content[n].length-1)&&(t.colgroupProps.push({useWidth:!1,width:0,widthUnits:"px",span:1}),t.headerContent.push({innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}),t.content.forEach((e=>e.push({innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1})))),t.content[n][o].colspan++,p(t,n,o,!0,1),d(t,!0)}}}),e({type:"button",id:`decrease-colspan-button-${n}${o}`,parent:`td-${n}${o}`,innerHTML:"CS-",attrs:[{attr:"classname",value:"decrease-colspan-button"},{attr:"disabled",value:t.content[n][o].colspan>1?"false":"true"}],eventObject:{listener:"click",func:()=>{p(t,n,o,!1,0),t.content[n][o].colspan--,d(t,!0)}}}))}},d=(e,t)=>{localStorage.setItem("savedState",JSON.stringify(e)),t&&u(e),n(e),o(e)},u=e=>{[l,r,i,a,c,s].map((t=>t(e)))};let g="",b={loading:!0,header:!0,colgroup:!0,caption:!1,captionText:"captionText",colgroupProps:[{useWidth:!1,width:0,widthUnits:"px",span:1,align:"left"},{useWidth:!1,width:0,widthUnits:"px",span:1,align:"left"},{useWidth:!1,width:0,widthUnits:"px",span:1,align:"left"},{useWidth:!1,width:0,widthUnits:"px",span:1,align:"left"},{useWidth:!1,width:0,widthUnits:"px",span:1,align:"left"}],headerContent:[{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}],content:[[{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}],[{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}],[{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}],[{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}]]};const w=new Promise(((e,t)=>{g=JSON.parse(localStorage.getItem("savedState")),g?e("Save state found."):t("No save state.")}));w.then((()=>{b=g,h()})),w.catch((()=>{console.log("No local state"),h()}));const h=()=>{u(b),n(b),o(b),document.getElementById("loading-modal").classList.add("display-none")}}();
