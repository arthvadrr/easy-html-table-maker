!function(){"use strict";const n={state:{loading:!0,header:!0,caption:!1,captionText:"captionText",headerContent:[{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}],content:[[{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}],[{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}],[{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}],[{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}]]},addState:(n,t)=>state[n]=t,removeState:n=>delete state[n],updateState:(n,t)=>state[n]=t},t=(n,t,e,o,l,i,r,a,c,s,p)=>{if("string"==typeof t&&(t=document.getElementById(t)),!n||!t)return void console.log("createElement requires type and parent params!");let d=document.createElement(n);if("input"===n){"checkbox"===a.type&&(d.setAttribute("type",a.type),d.setAttribute("name",a.name),d.setAttribute("value",a.value),d.checked=a.checked);const n=document.createElement("div"),o=document.createElement("label");o.setAttribute("for",e),o.innerHTML=a.value,n.appendChild(o),t.appendChild(n),t=n}e&&d.setAttribute("id",`${e}`),o&&d.setAttribute("class",`${o}`),l&&d.setAttribute("contenteditable","true"),c&&d.setAttribute("rowspan",c),s&&d.setAttribute("colspan",s),i&&(d.innerHTML=i),r&&d.addEventListener(r.type,(n=>{r.func(n)})),p&&d.setAttribute("disabled","true"),t.appendChild(d)},e=(n,t)=>{t||(t=document.getElementById("table-code"));let e="";const o=n=>"Â ".repeat(n);if(e+="&lt;table&gt<br>",n.caption&&(e+=`${o(2)}&lt;caption&gt${n.captionText}&lt;/caption&gt<br>`),n.header){e+=`${o(2)}&lt;thead&gt<br>${o(4)}&lt;tr&gt<br>`;for(let t=0;t<n.headerContent.length;t++)e+=`${o(6)}&lt;th&gt${n.headerContent[t].innerHTML}&lt;/th&gt<br>`;e+=`${o(4)}&lt;/tr&gt<br>${o(2)}&lt;/thead&gt<br>`}e+=`${o(2)}&lt;tbody&gt<br>`;for(let t=0;t<n.content.length;t++){e+=`${o(4)}&lt;tr&gt<br>`;for(let l=0;l<n.content[t].length;l++)n.content[t][l].colCollision||n.content[t][l].rowCollision||(e+=`${o(6)}&lt;td`,n.content[t][l].rowspan>1&&(e+=` rowspan="${n.content[t][l].rowspan}"`),n.content[t][l].colspan>1&&(e+=` colspan="${n.content[t][l].colspan}"`),e+=`&gt${n.content[t][l].innerHTML}&lt;/td&gt<br>`);e+=`${o(4)}&lt;/tr&gt<br>`}e+=`${o(2)}&lt;/tbody&gt<br>`,e+="&lt;/table&gt<br>",t.innerHTML=e},o=n=>{let t=[];for(let e=0;e<n.content[0].length;e++)t.push({innerHTML:" hi ",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1});return t},l=n=>{const{state:i}=n,r=document.getElementById("table-code");let a=document.getElementById("editor-table-container"),c=document.getElementById("editor-area");a.parentNode.removeChild(a),a=document.createElement("div"),a.setAttribute("id","editor-table-container"),c.appendChild(a);const s=()=>{localStorage.setItem("savedState",JSON.stringify(i)),l(n),e(n.state,r)},p=(n,t,e,o)=>{const l=i.content[n][t].rowspan,r=i.content[n][t].colspan;if(l>1)for(let a=o;a<l;a++)for(let o=0;o<r;o++)i.content[n+a][t+o].rowCollision=e;if(r>1)for(let a=o;a<r;a++)for(let o=0;o<l;o++)i.content[n+o][t+a].colCollision=e};if(t("div",a,"editor-table-container"),t("table","editor-table-container","editor-table","editor-table"),t("button","editor-table-container","add-row","add-row-button",!1,"Add Row",{type:"click",func:()=>{i.content.push(o(n.state)),s()}}),t("button","editor-table-container","remove-row","remove-row-button",!1,"Remove Row",{type:"click",func:()=>{for(let n=0;n<i.content.at(-1).length;n++)if(!0===i.content.at(-1)[n].rowCollision)return void alert("Rowspan detected, cannot delete row. Remove rowspan first.");i.content.length>1&&i.content.pop(),s()}}),t("button","editor-table-container","add-column","add-column-button",!1,"Add Column",{type:"click",func:()=>{i.headerContent.push({innerHTML:"col",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}),n.state.content.forEach((n=>n.push({innerHTML:"col",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}))),s()}}),t("button","editor-table-container","remove-column","remove-column-button",!1,"Remove Column",{type:"click",func:()=>{for(let n=0;n<i.content.length;n++)if(!0===i.content[n].at(-1).colCollision)return void alert("Colspan detected, cannot delete column. Remove colspan first.");i.headerContent.length>1&&i.headerContent.pop(),i.content.forEach((n=>{n.length>1&&n.pop()})),s()}}),t("input","editor-table-container","caption-toggle","caption-toggle",!1,!1,{type:"click",func:()=>{i.caption=!i.caption,s()}},{type:"checkbox",name:"captionToggle",value:"Toggle caption",checked:i.caption}),t("input","editor-table-container","header-toggle","header-toggle",!1,!1,{type:"click",func:()=>{i.header=!i.header,s()}},{type:"checkbox",name:"headerToggle",value:"Table header",checked:i.header}),i.caption&&t("caption","editor-table","table-caption",!1,!0,i.captionText,{type:"input",func:t=>{i.captionText=t.target.textContent,localStorage.setItem("savedState",JSON.stringify(i)),e(n.state,r)}}),i.header){t("thead","editor-table","table-head"),t("tr","table-head","table-header");for(let o=0;o<i.headerContent.length;o++)t("th","table-header",!1,!1,!0,i.headerContent[o].innerHTML,{type:"input",func:t=>{i.headerContent[o].innerHTML=t.target.textContent,localStorage.setItem("savedState",JSON.stringify(i)),e(n.state,r)}})}t("tbody","editor-table","table-body");for(let l=0;l<i.content.length;l++){t("tr","table-body",`table-row-${l}`);for(let a=0;a<i.content[l].length;a++){if(i.content[l][a].rowCollision||i.content[l][a].colCollision){console.log("ignore");continue}t("td",`table-row-${l}`,`td-${l}${a}`,!1,!1,!1,{type:"input",func:t=>{i.content[l][a].innerHTML=t.target.value,localStorage.setItem("savedState",JSON.stringify(i)),e(n.state,r)}},!1,i.content[l][a].rowspan,i.content[l][a].colspan);let c=document.createElement("input"),d=document.getElementById(`td-${l}${a}`);c.value=i.content[l][a].innerHTML,d.appendChild(c),p(l,a,!0,1),t("button",`td-${l}${a}`,`increase-rowspan-button-${l}${a}`,"increase-rowspan-button",!1,"RS+",{type:"click",func:()=>{let t=0;for(let n=0;n<i.content.length-1;n++)i.content[n][a].rowCollision||(t+=i.content[n][a].rowspan);(t>=i.content.length||l===i.content.length-1)&&i.content.push(o(n.state)),i.content[l][a].rowspan++,p(l,a,!0,1),s()}}),t("button",`td-${l}${a}`,`decrease-rowspan-button-${l}${a}`,"decrease-rowspan-button",!1,"RS-",{type:"click",func:()=>{p(l,a,!1,0),i.content[l][a].rowspan--,s()}},!1,!1,!1,!(i.content[l][a].rowspan>1)),t("button",`td-${l}${a}`,`increase-colspan-button-${l}${a}`,"increase-colspan-button",!1,"CS+",{type:"click",func:()=>{let t=0;for(let n=0;n<i.content[l].length-1;n++)i.content[l][n].colCollision||(t+=i.content[l][n].colspan);(t>=i.content[l].length||a===i.content[l].length-1)&&(i.headerContent.push({innerHTML:"col",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}),n.state.content.forEach((n=>n.push({innerHTML:"col",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1})))),i.content[l][a].colspan++,p(l,a,!0,1),s()}}),t("button",`td-${l}${a}`,`decrease-colspan-button-${l}${a}`,"decrease-colspan-button",!1,"CS-",{type:"click",func:()=>{p(l,a,!1,0),i.content[l][a].colspan--,s()}},!1,!1,!1,!(i.content[l][a].colspan>1))}}},i=document.getElementById("copy-table-code"),r=document.getElementById("table-code");let a="";const c=new Promise(((n,t)=>{a=JSON.parse(localStorage.getItem("savedState")),a?n("Save state found."):t("No save state.")}));c.then((()=>{n.state=a,s()})),c.catch((()=>{console.log("No local state"),s()}));const s=()=>{l(n),e(n.state,r),i.addEventListener("click",(()=>{(n=>{const t=document.createElement("textarea");t.value=n,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)})(r.innerHTML.replace(/<br\s*[\/]?>/gi,"\n").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," "))}))}}();
