!function(){"use strict";const e=(e={...e})=>{let t,{type:n,id:o,parent:r,innerHTML:l,inputProps:a,eventObject:s,attrs:i}=e;if(!n||!r)return;"string"==typeof r&&(r=document.getElementById(r));let c=document.createElement(n);if("input"===n){if(a.checked&&(c.checked=a.checked),c.type=a.type,a.value&&c.setAttribute("value",a.value),a.container?(t=document.createElement(a.container),a.containerClass&&t.classList.add(a.containerClass)):(t=document.createElement("div"),t.classList.add(`${e.id}-container`)),a.name&&c.setAttribute("name",a.name),a.label&&a.for||a.labelIcon&&a.for){const e=document.createElement("label");if(e.setAttribute("for",a.for),a.label&&(e.innerText=a.label),t.appendChild(e),r.appendChild(t),r=t,a.labelIcon){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.classList.add("label-icon"),t.setAttribute("focusable","false"),t.innerHTML=`<use href="#${a.labelIcon}"></use>`,e.appendChild(t)}a.labelClass&&(console.log(a.labelClass),e.classList.add(a.labelClass))}a.min&&c.setAttribute("min",a.min),a.max&&c.setAttribute("max",a.max),a.step&&c.setAttribute("step",a.step)}if(o&&c.setAttribute("id",`${o}`),i)for(let e=0;e<i.length;e++)c.setAttribute(i[e].attr,i[e].value),"disabled"===i[e].attr&&"false"===i[e].value&&c.removeAttribute("disabled");l&&(c.innerHTML=l),s&&c.addEventListener(s.listener,(e=>{s.func(e)})),r.appendChild(c)},t=()=>{const t=document.getElementById("editor-table-container");t.parentNode.removeChild(t),e({type:"div",id:"editor-table-container",parent:"editor-area"}),e({type:"table",id:"editor-table",parent:"editor-table-container",attrs:[{attr:"class",value:"editor-table"}]})},n=(e="Toast!",t)=>{const n=document.createElement("div"),o=document.createElement("div");o.classList.add("toast-msg"),n.appendChild(o);const r=document.getElementsByClassName("toast").length;n.classList.add("toast"),n.style.top=20+20*r+"px",o.innerText=e,t.appendChild(n);setTimeout((()=>{n.remove()}),3e3)},o=(e,t)=>""===e?"":"string"!=typeof e?'replaceHTML error: Argument at parameter "text" is not of type "string".':(t?"&lt;br&gt;"===(e=(e=(e=(e=e.replace(/\[\/]?n/g,"<br>")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/ /g,"&nbsp;")).substr(e.length-10)&&(e=e.slice(0,-10)):e=(e=(e=(e=e.replace(/<br\s*[\/]?>/gi,"\n")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&nbsp;/g," "),e),r=t=>{let r="";const l=e=>"Â ".repeat(e),a=document.getElementById("table-code");let s="";if(t.useClassName&&t.className.length>0&&(s=` class="${t.className}"`),r+=`<span class="tag">&lt;table${s}&gt</span><br>`,t.caption&&(r+=`${l(2)}<span class="tag">&lt;caption&gt</span>${t.captionText}<span class="tag">&lt;/caption&gt</span><br>`),t.colgroup){r+=`${l(2)}<span class="tag">&lt;colgroup&gt</span><br>`;for(let e=0;e<t.colgroupProps.length;e++){let n=`${l(4)}<span class="tag">&lt;col`;t.colgroupProps[e].span>1&&t.colgroupProps[e].useSpan&&(n+=` span="${t.colgroupProps[e].span}"`),""!==t.colgroupProps[e].className&&void 0!==t.colgroupProps[e].className&&(n+=` class="${t.colgroupProps[e].className}"`),0!==t.columnSettings[e].width&&t.columnSettings[e].useWidth&&(n+=` style="width:${t.columnSettings[e].width}${t.columnSettings[e].widthUnits}"`),n+="&gt</span><br>",r+=n}r+=`${l(2)}<span class="tag">&lt;/colgroup&gt</span><br>`}if(t.header){r+=`${l(2)}<span class="tag">&lt;thead&gt</span><br>`;for(let e=0;e<t.headerContent.length;e++){r+=`${l(4)}<span class="tag">&lt;tr&gt</span><br>`;for(let n=0;n<t.headerContent[e].length;n++){let a=o(t.headerContent[e][n].innerHTML,!0);t.useLineBreaks&&(a=a.replace(/(\r\n|\n|\r)/gm,"&lt;br&gt"));let s="th";if(!t.headerContent[e][n].colCollision&&!t.headerContent[e][n].rowCollision){if(r+=`${l(6)}<span class="tag">&lt;${s}`,t.headerContent[e][n].rowspan>1&&(r+=` rowspan="${t.headerContent[e][n].rowspan}"`),t.headerContent[e][n].colspan>1&&(r+=` colspan="${t.headerContent[e][n].colspan}"`),Object.keys(t.headerContent[e][n].styles).length>0){r+=' style="';for(const[o,l]of Object.entries(t.headerContent[e][n].styles))r+=`${o}:${l};`;r+='"'}r+=`&gt</span>${a}<span class="tag">&lt;/${s}&gt</span><br>`}}r+=`${l(4)}<span class="tag">&lt;/tr&gt<br></span>`}r+=`${l(2)}<span class="tag">&lt;/thead&gt</span><br>`}r+=`${l(2)}<span class="tag">&lt;tbody&gt</span><br>`;for(let e=0;e<t.content.length;e++){r+=`${l(4)}<span class="tag">&lt;tr&gt<br></span>`;for(let n=0;n<t.content[e].length;n++){let a=o(t.content[e][n].innerHTML,!0);t.useLineBreaks&&(a=a.replace(/(\r\n|\n|\r)/gm,"&lt;br&gt"));let s=t.content[e][n].isHeader,i=t.content[e][n].headerScope,c=s?`th scope="${i}"`:"td",p=s?"th":"td";if(!t.content[e][n].colCollision&&!t.content[e][n].rowCollision){if(r+=`${l(6)}<span class="tag">&lt;${c}`,t.content[e][n].rowspan>1&&(r+=` rowspan="${t.content[e][n].rowspan}"`),t.content[e][n].colspan>1&&(r+=` colspan="${t.content[e][n].colspan}"`),Object.keys(t.content[e][n].styles).length>0){r+=' style="';for(const[o,l]of Object.entries(t.content[e][n].styles))r+=`${o}:${l};`;r+='"'}r+=`&gt</span>${a}<span class="tag">&lt;/${p}&gt</span><br>`}}r+=`${l(4)}<span class="tag">&lt;/tr&gt</span><br>`}if(r+=`${l(2)}<span class="tag">&lt;/tbody&gt</span><br>`,t.footer){r+=`${l(2)}<span class="tag">&lt;tfoot&gt</span><br>`;for(let e=0;e<t.footerContent.length;e++){r+=`${l(4)}<span class="tag">&lt;tr&gt</span><br>`;for(let n=0;n<t.footerContent[e].length;n++){let a=o(t.footerContent[e][n].innerHTML,!0);t.useLineBreaks&&(a=a.replace(/(\r\n|\n|\r)/gm,"&lt;br&gt"));let s=t.footerContent[e][n].isHeader,i=t.footerContent[e][n].headerScope,c=s?`th scope="${i}"`:"td",p=s?"th":"td";if(!t.footerContent[e][n].colCollision&&!t.footerContent[e][n].rowCollision){if(r+=`${l(6)}<span class="tag">&lt;${c}`,t.footerContent[e][n].rowspan>1&&(r+=` rowspan="${t.content[e][n].rowspan}"`),t.footerContent[e][n].colspan>1&&(r+=` colspan="${t.footerContent[e][n].colspan}"`),Object.keys(t.footerContent[e][n].styles).length>0){r+=' style="';for(const[o,l]of Object.entries(t.footerContent[e][n].styles))r+=`${o}:${l};`;r+='"'}r+=`&gt</span>${a}<span class="tag">&lt;/${p}&gt</span><br>`}}r+=`${l(4)}<span class="tag">&lt;/tr&gt</span><br>`}r+=`${l(2)}<span class="tag">&lt;/tfoot&gt</span><br>`}return r+='<span class="tag">&lt;/table&gt</span><br>',a.innerHTML=r,document.getElementById("export-as-csv")||e({type:"button",id:"export-as-csv",innerHTML:"export as CSV",parent:"markup-controls",eventObject:{listener:"click",func:()=>{let e="table-csv",o="",r="";""!==t.className&&t.className&&(e=t.className.replace(" ","-")),""!==t.caption&&t.caption&&(e=t.caption+"csv");for(let e=0;e<t.headerContent.length;e++){let n="";for(let o=0;o<t.headerContent[e].length;o++){let r=t.headerContent[e][o].innerHTML;r=-1===r.indexOf(",")?r:`"${r}"`,n+=o+1===t.headerContent[e].length?r:r+","}n+="\r\n",o+=n}for(let e=0;e<t.content.length;e++){let n="";for(let o=0;o<t.content[e].length;o++){let r=t.content[e][o].innerHTML;r=-1===r.indexOf(",")?r:`"${r}"`,n+=o+1===t.content[e].length?r:r+","}n+="\r\n",r+=n}let l=o+r;l=l.slice(0,-2)+"\r\n";const a=encodeURI("data:text/csv;charset=utf-8,"+l),s=document.createElement("a");s.setAttribute("download",e),s.setAttribute("href",a),document.body.appendChild(s),s.click(),s.remove(),n(`'${e}' downloaded!`,document.body)}}}),document.getElementById("copy-table-code")||e({type:"button",id:"copy-table-code",parent:"markup-controls",innerHTML:"copy html",eventObject:{listener:"click",func:()=>{(e=>{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),n("Copied to clipboard!",document.getElementsByTagName("body")[0])})(o(a.innerText))}}}),r},l=t=>{let n=document.getElementById("preview-table");if(n&&n.parentNode.removeChild(n),e({type:"table",id:"preview-table",parent:"preview"}),t.caption&&e({type:"caption",id:"preview-table-caption",parent:"preview-table",innerHTML:t.captionText}),t.colgroup){e({type:"colgroup",id:"preview-colgroup",parent:"preview-table"});for(let n=0;n<t.columnSettings.length;n++){let o=[];t.columnSettings[n].width&&o.push({attr:"style",value:`width:${t.columnSettings[n].width}${t.columnSettings[n].widthUnits}`}),t.colgroupProps[n].useSpan&&t.colgroupProps[n].span>1&&o.push({attr:"span",value:t.colgroupProps[n].span}),e({type:"col",id:`preview-col-${n}`,parent:"preview-colgroup",attrs:o})}}if(t.header){e({type:"thead",id:"preview-thead",parent:"preview-table"});for(let n=0;n<t.headerContent.length;n++){e({type:"tr",id:`preview-table-header-row-${n}`,parent:"preview-thead"});for(let o=0;o<t.headerContent[n].length;o++){if(t.headerContent[n][o].rowCollision||t.headerContent[n][o].colCollision)continue;let r=t.headerContent[n][o].innerHTML;t.useLineBreaks&&(r=r.replace(/(\r\n|\n|\r)/gm,"<br>"));let l=()=>{let e="";for(const[r,l]of Object.entries(t.headerContent[n][o].styles))e+=`${r}:${l};`;return e};e({type:"th",id:`preview-th-${n}${o}`,parent:`preview-table-header-row-${n}`,innerHTML:r,attrs:[{attr:"rowspan",value:t.headerContent[n][o].rowspan},{attr:"colspan",value:t.headerContent[n][o].colspan},{attr:"style",value:l()}]})}}}e({type:"tbody",id:"preview-tbody",parent:"preview-table"});for(let n=0;n<t.content.length;n++){e({type:"tr",id:`preview-table-row-${n}`,parent:"preview-tbody"});for(let o=0;o<t.content[n].length;o++){if(t.content[n][o].rowCollision||t.content[n][o].colCollision)continue;let r=t.content[n][o].innerHTML;t.useLineBreaks&&(r=r.replace(/(\r\n|\n|\r)/gm,"<br>"));let l=t.content[n][o].isHeader?"th":"td",a=()=>{let e="";for(const[r,l]of Object.entries(t.content[n][o].styles))e+=`${r}:${l};`;return e};e({type:l,id:`preview-td-${n}${o}`,parent:`preview-table-row-${n}`,innerHTML:r,attrs:[{attr:"rowspan",value:t.content[n][o].rowspan},{attr:"colspan",value:t.content[n][o].colspan},{attr:"scope",value:t.content[n][o].headerScope},{attr:"style",value:a()}]})}}if(t.footer){e({type:"tfoot",id:"preview-tfoot",parent:"preview-table"});for(let n=0;n<t.footerContent.length;n++){e({type:"tr",id:`preview-table-footer-row-${n}`,parent:"preview-tfoot"});for(let o=0;o<t.footerContent[n].length;o++){if(t.footerContent[n][o].rowCollision||t.footerContent[n][o].colCollision)continue;let r=t.footerContent[n][o].innerHTML;t.useLineBreaks&&(r=r.replace(/(\r\n|\n|\r)/gm,"<br>"));let l=t.footerContent[n][o].isHeader?"th":"td",a=()=>{let e="";for(const[r,l]of Object.entries(t.footerContent[n][o].styles))e+=`${r}:${l};`;return e};e({type:l,id:`preview-footer-td-${n}${o}`,parent:`preview-table-footer-row-${n}`,innerHTML:r,attrs:[{attr:"rowspan",value:t.footerContent[n][o].rowspan},{attr:"colspan",value:t.footerContent[n][o].colspan},{attr:"scope",value:t.footerContent[n][o].headerScope},{attr:"style",value:a()}]})}}}},a=()=>{const e=document.getElementsByTagName("textarea");for(let t=0;t<e.length;t++){e[t].style="height: 24px; overflow-y: hidden;";const n=e=>{e.target.style.height="21px",e.target.style.height=`${e.target.scrollHeight}px`};e[t].addEventListener("input",(e=>n(e))),e[t].addEventListener("click",(e=>n(e)))}},s=(e,t)=>{if(t)return e;const n=document.createElement("div");n.innerHTML=e;let o=n.textContent;return n.innerHTML,n.remove(),o="<>"===o?"":o,o||""};function i(){document.querySelectorAll(".td-input").forEach((e=>{e.addEventListener("input",(e=>{e.target.value=s(e.target.value)})),e.addEventListener("paste",(e=>{e.target.value=s(e.target.value)}))}))}const c=(e,t=!1)=>{console.log(e),localStorage.setItem("savedState",JSON.stringify(e)),t&&(v(e),a()),e.allowTags||i(),r(e),l(e),(()=>{const e=document.getElementById("editor-table-controls").offsetHeight;document.getElementById("editor-table").style.height=e+"px"})()},p=e=>{let t=[];for(let n=0;n<e.content[0].length;n++)t.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col",styles:{}});return t},d=e=>{let t=[];for(let n=0;n<e.headerContent[0].length;n++)t.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,styles:{}});return t},u=e=>{let t=[];for(let n=0;n<e.footerContent[0].length;n++)t.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1});return t},h=t=>{console.time("controls"),e({type:"div",id:"editor-table-controls",parent:"editor-table-container"}),t.header&&(e({type:"button",id:"add-header-row",parent:"editor-table-controls",innerHTML:"&#x2b; add header row",eventObject:{listener:"click",func:()=>{t.header&&t.headerContent.push(d(t)),c(t,!0)}}}),e({type:"button",id:"remove-header-row",parent:"editor-table-controls",innerHTML:"&#8722; remove header row",eventObject:{listener:"click",func:()=>{if(t.header){for(let e=0;e<t.headerContent.at(-1).length;e++)if(!0===t.headerContent.at(-1)[e].rowCollision)return void alert("Rowspan detected, cannot delete row. Remove rowspan first.");t.headerContent.length>1&&t.headerContent.pop(),c(t,!0)}}}})),e({type:"button",id:"add-row",parent:"editor-table-controls",innerHTML:"&#x2b; add row",eventObject:{listener:"click",func:()=>{t.content.push(p(t)),c(t,!0)}}}),e({type:"button",id:"remove-row",parent:"editor-table-controls",innerHTML:"&#8722 remove row",eventObject:{listener:"click",func:()=>{for(let e=0;e<t.content.at(-1).length;e++)if(!0===t.content.at(-1)[e].rowCollision)return void alert("Rowspan detected, cannot delete row. Remove rowspan first.");t.content.length>1&&t.content.pop(),c(t,!0)}}}),t.footer&&(e({type:"button",id:"add-footer-row",parent:"editor-table-controls",innerHTML:"&#x2b; add footer row",eventObject:{listener:"click",func:()=>{t.footer&&t.footerContent.push(u(t)),c(t,!0)}}}),e({type:"button",id:"remove-footer-row",parent:"editor-table-controls",innerHTML:"&#8722 remove footer row",eventObject:{listener:"click",func:()=>{if(t.footer){for(let e=0;e<t.footerContent.at(-1).length;e++)if(!0===t.footerContent.at(-1)[e].rowCollision)return void alert("Rowspan detected, cannot delete row. Remove rowspan first.");t.footerContent.length>1&&t.footerContent.pop(),c(t,!0)}}}})),e({type:"button",id:"add-column",parent:"editor-table-controls",innerHTML:"&#x2b; add column",attrs:[{attr:"class",value:"add-column"}],eventObject:{listener:"click",func:()=>{(e=>{e.columnSettings.push({useWidth:!1,width:0,widthUnits:"px",align:"left"}),e.colgroupProps.push({span:1}),e.content.forEach((e=>e.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col",styles:{}}))),e.headerContent.forEach((e=>e.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,styles:{}}))),e.footerContent.forEach((e=>e.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col",styles:{}})))})(t),c(t,!0)}}}),e({type:"button",id:"remove-column",parent:"editor-table-controls",innerHTML:"&#8722 remove column",eventObject:{listener:"click",func:()=>{let e=!1;for(let n=0;n<t.content.length;n++)!0===t.content[n].at(-1).colCollision&&(e=!0);for(let n=0;n<t.headerContent.length;n++)!0===t.headerContent[n].at(-1).colCollision&&(e=!0);for(let n=0;n<t.footerContent.length;n++)!0===t.footerContent[n].at(-1).colCollision&&(e=!0);e?alert("Colspan detected, cannot delete column. Remove colspan first."):(t.columnSettings.length>1&&t.columnSettings.pop(),t.colgroupProps.length>1&&t.colgroupProps.pop(),t.headerContent.forEach((e=>{e.length>1&&e.pop()})),t.content.forEach((e=>{e.length>1&&e.pop()})),t.footerContent.forEach((e=>{e.length>1&&e.pop()})),c(t,!0))}}}),e({type:"input",id:"show-cell-controls-toggle",parent:"editor-table-controls",inputProps:{type:"checkbox",label:"Cell Controls",for:"show-cell-controls-toggle",checked:t.showCellControls},eventObject:{listener:"input",func:()=>{t.showCellControls=!t.showCellControls,c(t,!0)}}}),e({type:"input",id:"colgroup-toggle",parent:"editor-table-controls",inputProps:{type:"checkbox",label:"Colgroup",name:"colgroup-toggle",for:"colgroup-toggle",checked:t.colgroup},eventObject:{listener:"click",func:()=>{t.colgroup=!t.colgroup,c(t,!0)}}}),e({type:"input",id:"caption-toggle",parent:"editor-table-controls",attrs:[{attr:"type",value:"checkbox"},{attr:"name",value:"captionToggle"},{attr:"value",value:"Toggle caption"}],inputProps:{type:"checkbox",label:"Caption",name:"caption-toggle",for:"caption-toggle",value:"Toggle Caption",checked:t.caption},eventObject:{listener:"click",func:()=>{t.caption=!t.caption,c(t,!0)}}}),t.caption&&e({type:"input",id:"table-caption-input",parent:"editor-table-controls",inputProps:{type:"text",label:"Table caption",for:"table-caption-input",value:t.captionText},eventObject:{listener:"input",func:e=>{t.captionText=e.target.value,c(t)}}}),e({type:"input",id:"header-toggle",parent:"editor-table-controls",inputProps:{type:"checkbox",label:"Header",name:"header-toggle",for:"header-toggle",checked:t.header},eventObject:{listener:"click",func:()=>{t.header=!t.header,c(t,!0)}}}),e({type:"input",id:"footer-toggle",parent:"editor-table-controls",inputProps:{type:"checkbox",label:"Footer",name:"footer-toggle",for:"footer-toggle",checked:t.footer},eventObject:{listener:"click",func:()=>{t.footer=!t.footer,c(t,!0)}}}),e({type:"input",id:"use-line-breaks",parent:"editor-table-controls",inputProps:{type:"checkbox",label:"Use line breaks",for:"use-line-breaks",checked:t.useLineBreaks},eventObject:{listener:"click",func:()=>{t.useLineBreaks=!t.useLineBreaks,c(t,!0)}}}),e({type:"input",id:"allow-tags",parent:"editor-table-controls",inputProps:{type:"checkbox",label:"Allow tags",for:"allow-tags",checked:t.allowTags},eventObject:{listener:"click",func:()=>{t.allowTags=!t.allowTags;if(!t.allowTags&&confirm('\n        ð«Tags are now disallowed in the table.ð«\n\n        "Ok": Delete all tags currently in the table.\n\n        "Cancel": Tags will now be blocked, but keeps any existing tags.\n        (editing a field with existing tags will remove the tags)\n        ')){for(let e=0;e<t.headerContent.length;e++)for(let n=0;n<t.headerContent[e].length;n++)t.headerContent[e][n].innerHTML=s(t.headerContent[e][n].innerHTML);for(let e=0;e<t.content.length;e++)for(let n=0;n<t.content[e].length;n++)t.content[e][n].innerHTML=s(t.content[e][n].innerHTML)}c(t,!0)}}}),e({type:"input",id:"table-use-class",parent:"editor-table-controls",inputProps:{type:"checkbox",label:"Table class",for:"table-use-class",checked:t.useClassName},eventObject:{listener:"click",func:()=>{t.useClassName=!t.useClassName,c(t,!0)}}}),t.useClassName&&e({type:"input",id:"table-class-selector",parent:"editor-table-controls",inputProps:{type:"text",label:"table class",for:"table-class-selector",value:t.className},eventObject:{listener:"input",func:e=>{t.className=e.target.value,c(t)}}}),e({type:"button",id:"reset-table",parent:"editor-table-controls",innerHTML:"reset table",eventObject:{listener:"click",func:()=>{confirm("Are you sure you want to clear the current table data?")&&(localStorage.removeItem("savedState"),location.reload())}}}),e({type:"input",id:"import-from-csv",parent:"editor-table-controls",inputProps:{type:"file",label:"import from CSV",for:"import-from-csv",name:"import-from-csv"},eventObject:{listener:"change",func:e=>{if(confirm("Clear current table contents and import from csv?")){const o=new FileReader;o.readAsText(e.target.files[0]),o.onload=e=>{t.header=!0,t.footer=!1,t.headerContent=[],t.content=[],t.footerContent=[],t.colgroupProps=[],t.colgroupSettings=[];const n=[],o=[],r=[],l=[];let a=e.target.result.replaceAll("\r","");for(a=e.target.result.split("\n"),a=a.slice(0,-1);(""===a[a.length-1]||a[a.length-1===" "])&&a.length>0;)a.pop();const s=a[0].match(/[^,\n\r]+|"([^"]*)"+/g),i=(()=>{let e=0;for(let t=0;t<a.length;t++){let n=a[t].match(/[^,\n\r]+|"([^"]*)"+/g);e<n.length&&(e=n.length)}return e})();for(let e=0;e<i;e++){let t=e+1>s.length?"":s[e].toString().trim();t=t.replace(/"([^"]+(?="))"/g,"$1");let r={innerHTML:t,rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,styles:{}},l={innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col",styles:{}};o.push(l),n.push(r)}t.headerContent.push(n),t.footerContent.push(o);for(let e=0;e<n.length;e++){let e={useSpan:!1,span:1,useClassName:!1,className:""},t={useWidth:!1,width:0,widthUnits:"px",align:"none"};l.push(t),r.push(e)}t.colgroupProps=r,t.columnSettings=l;for(let e=1;e<a.length;e++){let n=a[e].match(/("[^"]*")|[^,]+/g),o=[];for(let e=0;e<i;e++){let t={innerHTML:e+1>n.length?"":n[e].toString().trim(),rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col",styles:{}};o.push(t)}t.content.push(o)}c(t,!0)},n(`${e.target.files[0].name} has been imported!`,document.body)}}}})},g=t=>{if(t.colgroup){e({type:"h3",innerHTML:"colgroup settings",parent:"editor-table",attrs:[{attr:"style",value:"display: table-header-group; text-align:left;"}]}),e({type:"colgroup",id:"editor-table-colgroup",parent:"editor-table",attrs:[{attr:"style",value:"display: table-header-group; text-align:left;"}]}),e({type:"tr",id:"editor-colgroup-tr",parent:"editor-table",attrs:[{attr:"style",value:"display: table-header-group; text-align:left;"}]}),e({type:"th",id:"editor-colgroup-header-th",parent:"editor-colgroup-tr",attrs:[{attr:"colspan",value:t.content[0].length.toString()}]});for(let n=0;n<t.colgroupProps.length;n++)e({type:"col",id:`colgroup-item-${n}`,parent:"editor-table-colgroup",attrs:[{attr:"span",value:t.colgroupProps[n].span?t.colgroupProps[n].span+"":1},{attr:"style",value:"display: table-cell; "+(t.columnSettings[n].width>1&&t.columnSettings[n].useWidth?"width:"+t.columnSettings[n].width+"px;":"")},{attr:"class",value:"colgroup-settings-col"}]}),e({type:"h4",parent:`colgroup-item-${n}`,innerHTML:`col ${n}`}),e({type:"input",id:`colgroup-use-span-${n}`,parent:`colgroup-item-${n}`,attrs:[{attr:"type",value:"checkbox"}],inputProps:{type:"checkbox",label:"span",name:"span-toggle",for:`colgroup-use-span-${n}`,value:"span",checked:t.colgroupProps[n].useSpan},eventObject:{listener:"click",func:()=>{t.colgroupProps[n].useSpan=!t.colgroupProps[n].useSpan,c(t,!0)}}}),t.colgroupProps[n].useSpan&&e({type:"input",id:`colgroup-use-span-amount-${n}`,parent:`colgroup-item-${n}`,inputProps:{type:"number",label:`Amount (current max is ${t.content.length+t.headerContent.length+t.footerContent.length})`,name:"span-toggle",for:`colgroup-use-span-${n}`,value:t.colgroupProps[n].span,checked:t.colgroupProps[n].useSpan},eventObject:{listener:"input",func:e=>{e.target.value<=t.content.length+t.headerContent.length+t.footerContent.length?(t.colgroupProps[n].span=e.target.value,c(t)):(alert("Please enter a valid number (span cannot exceed total table rows length)"),e.target.value=""),c(t)}}}),e({type:"input",id:`colgroup-use-classname-name-${n}`,parent:`colgroup-item-${n}`,attrs:[{attr:"type",value:"checkbox"}],inputProps:{type:"checkbox",label:"class",name:"classname-toggle",for:`colgroup-use-classname-name-${n}`,checked:t.colgroupProps[n].useClassName},eventObject:{listener:"click",func:()=>{t.colgroupProps[n].useClassName=!t.colgroupProps[n].useClassName,c(t,!0)}}}),t.colgroupProps[n].useClassName&&e({type:"input",id:`colgroup-use-classname-name-${n}`,parent:`colgroup-item-${n}`,attrs:[{attr:"placeholder",value:"Enter a class name"}],inputProps:{type:"text",label:"name",name:`colgroup-use-classname-name-${n}`,for:`colgroup-use-classname-name-${n}`,value:t.colgroupProps[n].className?t.colgroupProps[n].className:""},eventObject:{listener:"input",func:e=>{void 0!==e.target.value&&(t.colgroupProps[n].className=e.target.value,c(t)),c(t)}}}),e({type:"input",id:`use-col-fixed-width-${n}`,parent:`colgroup-item-${n}`,inputProps:{type:"checkbox",label:"fixed width",for:`use-col-fixed-width-${n}`,checked:t.columnSettings[n].useWidth},eventObject:{listener:"click",func:()=>{t.columnSettings[n].useWidth=!t.columnSettings[n].useWidth,c(t,!0)}}}),t.columnSettings[n].useWidth&&(e({type:"input",id:`col-width-input-${n}`,parent:`colgroup-item-${n}`,inputProps:{type:"number",container:"div",for:`columnWidth-${n}`,label:"col width",value:t.columnSettings[n].width,min:0,max:1e3}}),e({type:"button",id:`col-width-${n}-set`,parent:`colgroup-item-${n}`,innerHTML:"set",eventObject:{listener:"click",func:()=>{const e=document.getElementById(`col-width-input-${n}`).value;t.columnSettings[n].width=e,c(t,!0)}}}),e({type:"button",id:`col-width-${n}-clear`,parent:`colgroup-item-${n}`,innerHTML:"clear",eventObject:{listener:"click",func:()=>{document.getElementById(`col-width-input-${n}`).value=0,t.columnSettings[n].width="0",c(t,!0)}}}))}},f=(e,t)=>`width: ${e*t+4*e}px`,b=(e,t,n,o,r,l,a)=>{let s,i;if(l?(s=e.headerContent[t][n].rowspan,i=e.headerContent[t][n].colspan):a?(s=e.footerContent[t][n].rowspan,i=e.footerContent[t][n].colspan):(s=e.content[t][n].rowspan,i=e.content[t][n].colspan),s>1)for(let c=r;c<s;c++)for(let r=0;r<i;r++)l?e.headerContent[t+c][n+r].rowCollision=o:a?e.footerContent[t+c][n+r].rowCollision=o:e.content[t+c][n+r].rowCollision=o;if(i>1)for(let c=r;c<i;c++)for(let r=0;r<s;r++)l?e.headerContent[t+r][n+c].colCollision=o:a?e.footerContent[t+r][n+c].colCollision=o:e.content[t+r][n+c].colCollision=o},$=t=>{if(t.header){e({type:"thead",id:"table-header",parent:"editor-table"}),e({type:"h3",id:"header-heading",parent:"table-header",innerHTML:"header"});for(let n=0;n<t.headerContent.length;n++){e({type:"tr",id:`table-header-row-${n}`,parent:"table-header"});for(let o=0;o<t.headerContent[n].length;o++)if(!t.headerContent[n][o].rowCollision&&!t.headerContent[n][o].colCollision&&(b(t,n,o,!0,1,!0),e({type:"th",id:`th-${n}${o}`,parent:`table-header-row-${n}`,attrs:[{attr:"rowspan",value:t.headerContent[n][o].rowspan},{attr:"colspan",value:t.headerContent[n][o].colspan},{attr:"style",value:f(t.headerContent[n][o].colspan,t.cellWidth)}]}),e({type:"div",parent:`th-${n}${o}`,id:`th-grid-container-${n}${o}`,attrs:[{attr:"class",value:"grid-container"}]}),e({type:"textarea",id:`p-${n}${o}`,parent:`th-grid-container-${n}${o}`,innerHTML:t.headerContent[n][o].innerHTML,attrs:[{attr:"class",value:`td-input pre-wrap text-align-${t.headerContent[n][o].styles["text-align"]}`}],inputProps:{value:t.headerContent[n][o].innerHTML},eventObject:{listener:"input",func:e=>{t.headerContent[n][o].innerHTML=s(e.target.value,t.allowTags),c(t)}}}),t.showCellControls)){e({type:"div",id:`th-controls-${n}${o}`,parent:`th-grid-container-${n}${o}`,attrs:[{attr:"class",value:"th-controls"}]}),e({type:"div",id:`th-styles-controls-container-${n}${o}`,parent:`th-controls-${n}${o}`,attrs:[{attr:"class",value:"td-styles-controls"}]}),e({type:"div",id:`header-text-align-controls-${n}${o}`,parent:`th-styles-controls-container-${n}${o}`,attrs:[{attr:"class",value:"td-text-align-controls-container"}]});[{dir:"left",entity:"â¦"},{dir:"center",entity:"â"},{dir:"right",entity:"â¤"}].forEach((r=>{e({type:"input",id:`header-text-align-${r.dir}-${n}${o}`,parent:`header-text-align-controls-${n}${o}`,inputProps:{type:"radio",container:"div",labelIcon:`icon-text-align-${r.dir}`,labelClass:""+(t.headerContent[n][o].styles["text-align"]===r.dir||"left"===r.dir&&void 0===t.headerContent[n][o].styles["text-align"]?"active":""),for:`header-text-align-${r.dir}-${n}${o}`,name:`th-text-align-${n}${o}`,checked:t.headerContent[n][o].styles["text-align"]===r.dir},attrs:[{attr:"class",value:"td-align-button"},{attr:"aria-label",value:`align text ${r.dir}`}],eventObject:{listener:"click",func:()=>{"left"===r.dir?t.headerContent[n][o].styles["text-align"]&&delete t.headerContent[n][o].styles["text-align"]:t.headerContent[n][o].styles["text-align"]=r.dir,c(t,!0)}}})})),e({type:"span",id:`header-rowcol-button-container-${n}${o}`,parent:`th-controls-${n}${o}`,attrs:[{attr:"class",value:"rowcol-button-container"}]}),e({type:"button",id:`increase-header-rowspan-button-${n}${o}`,parent:`header-rowcol-button-container-${n}${o}`,innerHTML:"rs+",attrs:[{attr:"class",value:"increase-rowspan-button"}],eventObject:{listener:"click",func:()=>{let e=0;for(let n=0;n<t.headerContent.length-1;n++)t.headerContent[n][o].rowCollision||(e+=t.headerContent[n][o].rowspan);(e>=t.headerContent.length||n===t.headerContent.length-1)&&t.headerContent.push(d(t)),t.headerContent[n][o].rowspan++,b(t,n,o,!0,1,!0),c(t,!0)}}}),e({type:"button",id:`decrease-header-rowspan-button-${n}${o}`,parent:`header-rowcol-button-container-${n}${o}`,innerHTML:"rs-",attrs:[{attr:"class",value:"decrease-rowspan-button"},{attr:"disabled",value:t.headerContent[n][o].rowspan>1?"false":"true"}],eventObject:{listener:"click",func:()=>{b(t,n,o,!1,0,!0),t.headerContent[n][o].rowspan--,c(t,!0)}}}),e({type:"button",id:`increase-header-colspan-button-${n}${o}`,parent:`header-rowcol-button-container-${n}${o}`,innerHTML:"cs+",eventObject:{listener:"click",func:()=>{let e=0;for(let o=0;o<t.headerContent[n].length-1;o++)t.headerContent[n][o].colCollision||(e+=t.headerContent[n][o].colspan);(e>=t.headerContent[n].length||o===t.headerContent[n].length-1)&&(t.colgroupProps.push({useWidth:!1,width:0,widthUnits:"px",span:1}),t.columnSettings.push({useWidth:!1,width:0,widthUnits:"px",align:"none"}),t.headerContent.forEach((e=>e.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,styles:{}}))),t.footerContent.forEach((e=>e.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col",styles:{}}))),t.content.forEach((e=>e.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col",styles:{}})))),t.headerContent[n][o].colspan++,b(t,n,o,!0,1,!0),c(t,!0)}}}),e({type:"button",id:`decrease-colspan-button-${n}${o}`,parent:`header-rowcol-button-container-${n}${o}`,innerHTML:"cs-",attrs:[{attr:"class",value:"decrease-colspan-button"},{attr:"disabled",value:t.headerContent[n][o].colspan>1?"false":"true"}],eventObject:{listener:"click",func:()=>{b(t,n,o,!1,0,!0),t.headerContent[n][o].colspan--,c(t,!0)}}})}e({type:"button",innerHTML:"&#10006; delete row",parent:`table-header-row-${n}`,attrs:[{attr:"disabled",value:!(t.headerContent.length>1)||"false"},{attr:"aria-label",value:`delete header row ${n}`},{attr:"class",value:"delete-row-btn"}],eventObject:{listener:"click",func:()=>{t.headerContent.length>1&&confirm(`Delete row ${n} and all of its contents?`)&&(t.headerContent.splice(n,1),c(t,!0))}}})}}},C=t=>{e({type:"tbody",id:"table-body",parent:"editor-table"}),e({type:"h3",id:"body-heading",parent:"table-body",innerHTML:"body"}),e({type:"tr",id:"table-col-control-row",parent:"table-body"});for(let n=0;n<t.content.length;n++){e({type:"tr",id:`table-row-${n}`,parent:"table-body"});for(let o=0;o<t.content[n].length;o++){if(t.content[n][o].rowCollision||t.content[n][o].colCollision)continue;0===n&&e({type:"td",id:`td-colcon-${o}`,parent:"table-col-control-row"}),b(t,n,o,!0,1),e({type:"td",id:`td-${n}${o}`,parent:`table-row-${n}`,attrs:[{attr:"rowspan",value:t.content[n][o].rowspan},{attr:"colspan",value:t.content[n][o].colspan},{attr:"style",value:f(t.content[n][o].colspan,t.cellWidth)}]}),e({type:"div",parent:`td-${n}${o}`,id:`td-grid-container-${n}${o}`,attrs:[{attr:"class",value:"grid-container"}]});const r=()=>{let e="text-align-";const r=t.content[n][o].styles["text-align"],l=t.content[n][o].isHeader;return e+=r||(l?"center":"left"),e};if(e({type:"textarea",id:`p-${n}${o}`,parent:`td-grid-container-${n}${o}`,innerHTML:t.content[n][o].innerHTML,attrs:[{attr:"class",value:`td-input pre-wrap ${r()}`}],inputProps:{value:t.content[n][o].innerHTML},eventObject:{listener:"input",func:e=>{t.content[n][o].innerHTML=s(e.target.value,t.allowTags),c(t)}}}),t.showCellControls){e({type:"div",id:`td-body-controls-${n}${o}`,parent:`td-grid-container-${n}${o}`,attrs:[{attr:"class",value:"td-body-controls"}]}),e({type:"div",id:`td-styles-controls-container-${n}${o}`,parent:`td-body-controls-${n}${o}`,attrs:[{attr:"class",value:"td-styles-controls"}]}),e({type:"div",id:`text-align-controls-${n}${o}`,parent:`td-styles-controls-container-${n}${o}`,attrs:[{attr:"class",value:"td-text-align-controls-container"}]});const r=e=>{let r="";const l=t.content[n][o].isHeader,a=t.content[n][o].styles["text-align"],s=e.dir;return void 0===a&&("left"!==s||l||(r="active"),"center"===s&&l&&(r="active")),a===s&&(r="active"),r};[{dir:"left",entity:"â¦"},{dir:"center",entity:"â"},{dir:"right",entity:"â¤"}].forEach((l=>{e({type:"input",id:`text-align-${l.dir}-${n}${o}`,parent:`text-align-controls-${n}${o}`,inputProps:{type:"radio",container:"div",labelIcon:`icon-text-align-${l.dir}`,labelClass:r(l),for:`text-align-${l.dir}-${n}${o}`,name:`td-text-align-${n}${o}`,checked:t.content[n][o].styles["text-align"]===l.dir},attrs:[{attr:"class",value:"td-align-button"},{attr:"aria-label",value:`align text ${l.dir}`}],eventObject:{listener:"input",func:()=>{const e=t.content[n][o].isHeader;t.content[n][o].styles["text-align"],"left"!==l.dir||e?"center"===l.dir&&e?delete t.content[n][o].styles["text-align"]:t.content[n][o].styles["text-align"]=l.dir:delete t.content[n][o].styles["text-align"],c(t,!0)}}})})),e({type:"div",id:`body-controls-top-container-${n}${o}`,parent:`td-body-controls-${n}${o}`,attrs:[{attr:"class",value:"controls-top-container"}]}),e({type:"span",id:`body-rowcol-button-container-${n}${o}`,parent:`body-controls-top-container-${n}${o}`,attrs:[{attr:"class",value:"rowcol-button-container"}]}),e({type:"button",id:`increase-rowspan-button-${n}${o}`,parent:`body-rowcol-button-container-${n}${o}`,innerHTML:"rs+",attrs:[{attr:"class",value:"increase-rowspan-button"}],eventObject:{listener:"click",func:()=>{let e=0;for(let n=0;n<t.content.length-1;n++)t.content[n][o].rowCollision||(e+=t.content[n][o].rowspan);(e>=t.content.length||n===t.content.length-1)&&t.content.push(p(t)),t.content[n][o].rowspan++,b(t,n,o,!0,1),c(t,!0)}}}),e({type:"button",id:`decrease-rowspan-button-${n}${o}`,parent:`body-rowcol-button-container-${n}${o}`,innerHTML:"rs-",attrs:[{attr:"class",value:"decrease-rowspan-button"},{attr:"disabled",value:t.content[n][o].rowspan>1?"false":"true"}],eventObject:{listener:"click",func:()=>{b(t,n,o,!1,0),t.content[n][o].rowspan--,c(t,!0)}}}),e({type:"button",id:`increase-colspan-button-${n}${o}`,parent:`body-rowcol-button-container-${n}${o}`,innerHTML:"cs+",eventObject:{listener:"click",func:()=>{let e=0;for(let o=0;o<t.content[n].length-1;o++)t.content[n][o].colCollision||(e+=t.content[n][o].colspan);(e>=t.content[n].length||o===t.content[n].length-1)&&(t.colgroupProps.push({useWidth:!1,width:0,widthUnits:"px",span:1}),t.columnSettings.push({useWidth:!1,width:0,widthUnits:"px",align:"none"}),t.content.forEach((e=>e.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col",styles:{}}))),t.headerContent.forEach((e=>e.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,styles:{}}))),t.footerContent.forEach((e=>e.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col",styles:{}})))),t.content[n][o].colspan++,b(t,n,o,!0,1),c(t,!0)}}}),e({type:"button",id:`decrease-colspan-button-${n}${o}`,parent:`body-rowcol-button-container-${n}${o}`,innerHTML:"cs-",attrs:[{attr:"class",value:"decrease-colspan-button"},{attr:"disabled",value:t.content[n][o].colspan>1?"false":"true"}],eventObject:{listener:"click",func:()=>{b(t,n,o,!1,0),t.content[n][o].colspan--,c(t,!0)}}}),e({type:"input",id:`isHeader-${n}${o}`,parent:`body-controls-top-container-${n}${o}`,attrs:[{attr:"class",value:"isheader"}],inputProps:{type:"checkbox",container:"span",containerClass:"isheader-container",label:"Is header?",for:`isHeader-${n}${o}`,name:`isHeader-${n}${o}`,checked:t.content[n][o].isHeader},eventObject:{listener:"change",func:e=>{t.content[n][o].isHeader=!t.content[n][o].isHeader,c(t,!0)}}}),t.content[n][o].isHeader&&(e({type:"div",id:`isHeaderContainer-${n}${o}`,parent:`td-body-controls-${n}${o}`,attrs:[{attr:"class",value:"isheader-scope-container"}]}),e({type:"span",innerHTML:"Header scope:",parent:`isHeaderContainer-${n}${o}`}),e({type:"input",id:`headerScopeCol-${n}${o}`,parent:`isHeaderContainer-${n}${o}`,attrs:[{attr:"class",value:"headerScope"}],inputProps:{type:"radio",container:"div",label:"Col",for:`headerScopeCol-${n}${o}`,name:`scope-${n}${o}`,checked:"col"===t.content[n][o].headerScope},eventObject:{listener:"change",func:()=>{t.content[n][o].headerScope="col",c(t,!0)}}}),e({type:"input",id:`headerScopeRow-${n}${o}`,parent:`isHeaderContainer-${n}${o}`,attrs:[{attr:"class",value:"headerScope"}],inputProps:{type:"radio",container:"div",label:"Row",for:`headerScopeRow-${n}${o}`,name:`scope-${n}${o}`,checked:"row"===t.content[n][o].headerScope},eventObject:{listener:"change",func:()=>{t.content[n][o].headerScope="row",c(t,!0)}}}))}}e({type:"button",innerHTML:"&#10006; delete row",parent:`table-row-${n}`,attrs:[{attr:"disabled",value:!(t.content.length>1)||"false"},{attr:"aria-label",value:`delete body row ${n}`},{attr:"class",value:"delete-row-btn"}],eventObject:{listener:"click",func:()=>{t.content.length>1&&confirm(`Delete row ${n} and all of its contents?`)&&(t.content.splice(n,1),c(t,!0))}}})}},w=t=>{if(t.footer){e({type:"h3",id:"footer-heading",parent:"editor-table",innerHTML:"footer"}),e({type:"tbody",id:"table-footer",parent:"editor-table"});for(let n=0;n<t.footerContent.length;n++){e({type:"tr",id:`table-footer-row-${n}`,parent:"table-footer"});for(let o=0;o<t.footerContent[n].length;o++)if(!t.footerContent[n][o].rowCollision&&!t.footerContent[n][o].colCollision&&(b(t,n,o,!0,1,!1,!0),e({type:"td",id:`footer-td-${n}${o}`,parent:`table-footer-row-${n}`,attrs:[{attr:"rowspan",value:t.footerContent[n][o].rowspan},{attr:"colspan",value:t.footerContent[n][o].colspan},{attr:"style",value:f(t.footerContent[n][o].colspan,t.cellWidth)}]}),e({type:"div",parent:`footer-td-${n}${o}`,id:`td-footer-grid-container-${n}${o}`,attrs:[{attr:"class",value:"grid-container"}]}),e({type:"textarea",id:`fp-${n}${o}`,parent:`td-footer-grid-container-${n}${o}`,innerHTML:t.footerContent[n][o].innerHTML,attrs:[{attr:"class",value:`td-input pre-wrap text-align-${t.footerContent[n][o].styles["text-align"]}`}],inputProps:{value:t.footerContent[n][o].innerHTML},eventObject:{listener:"input",func:e=>{t.footerContent[n][o].innerHTML=s(e.target.value,t.allowTags),c(t)}}}),t.showCellControls)){e({type:"div",id:`td-footer-controls-${n}${o}`,parent:`td-footer-grid-container-${n}${o}`,attrs:[{attr:"class",value:"td-footer-controls"}]}),e({type:"div",id:`tf-styles-controls-container-${n}${o}`,parent:`td-footer-controls-${n}${o}`,attrs:[{attr:"class",value:"td-styles-controls"}]}),e({type:"div",id:`footer-text-align-controls-${n}${o}`,parent:`tf-styles-controls-container-${n}${o}`,attrs:[{attr:"class",value:"td-text-align-controls-container"}]});[{dir:"left",entity:"â¦"},{dir:"center",entity:"â"},{dir:"right",entity:"â¤"}].forEach((r=>{e({type:"input",id:`footer-text-align-${r.dir}-${n}${o}`,parent:`footer-text-align-controls-${n}${o}`,inputProps:{type:"radio",container:"div",labelIcon:`icon-text-align-${r.dir}`,labelClass:""+(t.footerContent[n][o].styles["text-align"]===r.dir||"left"===r.dir&&void 0===t.footerContent[n][o].styles["text-align"]?"active":""),for:`footer-text-align-${r.dir}-${n}${o}`,name:`tf-text-align-${n}${o}`,checked:t.footerContent[n][o].styles["text-align"]===r.dir},attrs:[{attr:"class",value:"td-align-button"},{attr:"aria-label",value:`align text ${r.dir}`}],eventObject:{listener:"click",func:()=>{"left"===r.dir?t.footerContent[n][o].styles["text-align"]&&delete t.footerContent[n][o].styles["text-align"]:t.footerContent[n][o].styles["text-align"]=r.dir,c(t,!0)}}})})),e({type:"div",id:`footer-controls-top-container-${n}${o}`,parent:`td-footer-controls-${n}${o}`,attrs:[{attr:"class",value:"controls-top-container"}]}),e({type:"span",id:`footer-rowcol-button-container-${n}${o}`,parent:`footer-controls-top-container-${n}${o}`,attrs:[{attr:"class",value:"rowcol-button-container"}]}),e({type:"button",id:`increase-footer-rowspan-button-${n}${o}`,parent:`footer-rowcol-button-container-${n}${o}`,innerHTML:"rs+",attrs:[{attr:"class",value:"increase-rowspan-button"}],eventObject:{listener:"click",func:()=>{let e=0;for(let n=0;n<t.footerContent.length-1;n++)t.footerContent[n][o].rowCollision||(e+=t.footerContent[n][o].rowspan);(e>=t.footerContent.length||n===t.footerContent.length-1)&&t.footerContent.push(u(t)),t.footerContent[n][o].rowspan++,b(t,n,o,!0,1,!1,!0),c(t,!0)}}}),e({type:"button",id:`decrease-footer-rowspan-button-${n}${o}`,parent:`footer-rowcol-button-container-${n}${o}`,innerHTML:"rs-",attrs:[{attr:"class",value:"decrease-rowspan-button"},{attr:"disabled",value:t.footerContent[n][o].rowspan>1?"false":"true"}],eventObject:{listener:"click",func:()=>{b(t,n,o,!1,0,!1,!0),t.footerContent[n][o].rowspan--,c(t,!0)}}}),e({type:"button",id:`increase-footer-colspan-button-${n}${o}`,parent:`footer-rowcol-button-container-${n}${o}`,innerHTML:"cs+",eventObject:{listener:"click",func:()=>{let e=0;for(let o=0;o<t.footerContent[n].length-1;o++)t.footerContent[n][o].colCollision||(e+=t.footerContent[n][o].colspan);(e>=t.footerContent[n].length||o===t.footerContent[n].length-1)&&(t.colgroupProps.push({useWidth:!1,width:0,widthUnits:"px",span:1}),t.columnSettings.push({useWidth:!1,width:0,widthUnits:"px",align:"none"}),t.headerContent.forEach((e=>e.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,styles:{}}))),t.footerContent.forEach((e=>e.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,styles:{}}))),t.content.forEach((e=>e.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col",styles:{}})))),t.footerContent[n][o].colspan++,b(t,n,o,!0,1,!1,!0),c(t,!0)}}}),e({type:"button",id:`decrease-colspan-button-${n}${o}`,parent:`footer-rowcol-button-container-${n}${o}`,innerHTML:"cs-",attrs:[{attr:"class",value:"decrease-colspan-button"},{attr:"disabled",value:t.footerContent[n][o].colspan>1?"false":"true"}],eventObject:{listener:"click",func:()=>{b(t,n,o,!1,0,!1,!0),t.footerContent[n][o].colspan--,c(t,!0)}}}),e({type:"input",id:`footer-isHeader-${n}${o}`,parent:`footer-controls-top-container-${n}${o}`,attrs:[{attr:"class",value:"isheader"}],inputProps:{type:"checkbox",container:"span",containerClass:"isheader-container",label:"Is header?",for:`footer-isHeader-${n}${o}`,name:`footer-isHeader-${n}${o}`,checked:t.footerContent[n][o].isHeader},eventObject:{listener:"change",func:e=>{t.footerContent[n][o].isHeader=!t.footerContent[n][o].isHeader,c(t,!0)}}}),t.footerContent[n][o].isHeader&&(e({type:"div",id:`footer-isHeaderContainer-${n}${o}`,parent:`td-footer-controls-${n}${o}`,attrs:[{attr:"class",value:"isheader-scope-container"}]}),e({type:"span",innerHTML:"Header scope:",parent:`footer-isHeaderContainer-${n}${o}`}),e({type:"input",id:`footer-headerScopeCol-${n}${o}`,parent:`footer-isHeaderContainer-${n}${o}`,attrs:[{attr:"class",value:"headerScope"}],inputProps:{type:"radio",container:"div",label:"Col",for:`footer-headerScopeCol-${n}${o}`,name:`footer-scope-${n}${o}`,checked:"col"===t.footerContent[n][o].headerScope},eventObject:{listener:"change",func:()=>{t.footerContent[n][o].headerScope="col",c(t,!0)}}}),e({type:"input",id:`footer-headerScopeRow-${n}${o}`,parent:`footer-isHeaderContainer-${n}${o}`,attrs:[{attr:"class",value:"headerScope"}],inputProps:{type:"radio",container:"div",label:"Row",for:`footer-headerScopeRow-${n}${o}`,name:`footer-scope-${n}${o}`,checked:"row"===t.footerContent[n][o].headerScope},eventObject:{listener:"change",func:()=>{t.footerContent[n][o].headerScope="row",c(t,!0)}}}))}e({type:"button",innerHTML:"&#10006; delete row",parent:`table-footer-row-${n}`,attrs:[{attr:"disabled",value:!(t.footerContent.length>1)||"false"},{attr:"aria-label",value:`delete footer row ${n}`},{attr:"class",value:"delete-row-btn"}],eventObject:{listener:"click",func:()=>{t.footerContent.length>1&&confirm(`Delete row ${n} and all of its contents?`)&&(t.footerContent.splice(n,1),c(t,!0))}}})}}},y=t=>{e({type:"tr",parent:"editor-table",id:"remove-col-row"});for(let n=0;n<t.content[t.content.length-1].length;n++)e({type:"td",id:`td-dc-${n}`,parent:"remove-col-row"}),e({type:"button",id:`delete-col-${n}`,innerHTML:"&#10006; delete column",parent:`td-dc-${n}`,attrs:[{attr:"disabled",value:t.content[0].length>1?"false":"true"},{attr:"class",value:"delete-col-btn"}],eventObject:{listener:"click",func:()=>{if(t.content[0].length>1&&confirm(`Delete column ${n} and all of its contents?`)){for(let e=0;e<t.headerContent.length;e++)t.headerContent[e].splice(n,1);for(let e=0;e<t.content.length;e++)t.content[e].splice(n,1);for(let e=0;e<t.footerContent.length;e++)t.footerContent[e].splice(n,1);t.columnSettings.splice(n,1),t.colgroupProps.splice(n,1),c(t,!0)}}}})},v=e=>{[t,h,g,$,C,w,y].map((t=>t(e)));document.querySelectorAll("input.td-input").forEach((t=>{t.addEventListener("input",(t=>{t.target.value=s(t.target.value,e.allowTags)}))}))};let m="",H={loading:!0,showCellControls:!1,allowTags:!1,useLineBreaks:!0,header:!0,footer:!1,colgroup:!1,caption:!1,captionText:"",useClassName:!1,cellWidth:180,className:"",columnSettings:[{useWidth:!1,width:0,widthUnits:"px",align:"none"},{useWidth:!1,width:0,widthUnits:"px",align:"none"},{useWidth:!1,width:0,widthUnits:"px",align:"none"}],colgroupProps:[{useSpan:!1,span:1,useClassName:!1,className:""},{useSpan:!1,span:1,useClassName:!1,className:""},{useSpan:!1,span:1,useClassName:!1,className:""}],headerContent:[[{innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,styles:{}},{innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,styles:{}},{innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,styles:{}}]],content:[[{innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col",styles:{}},{innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col",styles:{}},{innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col",styles:{}}],[{innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col",styles:{}},{innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col",styles:{}},{innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col",styles:{}}]],footerContent:[[{innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col",styles:{}},{innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col",styles:{}},{innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col",styles:{}}]]};new Promise(((e,t)=>{m=JSON.parse(localStorage.getItem("savedState")),m?e("Save state found."):t("No save state.")})).then((()=>{H=m,T()})).catch((()=>{console.log("No local state"),T()}));const T=()=>{v(H),r(H),l(H),a(),H.allowTags||i();const e=document.getElementById("editor-table-controls").offsetHeight;document.getElementById("editor-table").style.height=e+"px",document.getElementById("loading-modal").classList.add("display-none")}}();
