!function(){"use strict";const e=(e={type:o,id:n,parent:r,innerHTML:l,inputProps:a,eventObject:s,attrs:i})=>{let t,{type:o,id:n,parent:r,innerHTML:l,inputProps:a,eventObject:s,attrs:i}=e;if(!o||!r)return;"string"==typeof r&&(r=document.getElementById(r));let c=document.createElement(o);if("input"===o||"textarea"===o){if(a.checked&&(c.checked=a.checked),"input"===o&&(c.type=a.type,a.value&&c.setAttribute("value",a.value)),a.container?(t=document.createElement(a.container),a.containerClass&&t.classList.add(a.containerClass)):(t=document.createElement("div"),t.classList.add(`${e.id}-container`)),a.name&&c.setAttribute("name",a.name),a.label&&a.for){const e=document.createElement("label");e.setAttribute("for",a.for),e.innerHTML=a.label,t.appendChild(e),r.appendChild(t),r=t}a.min&&c.setAttribute("min",a.min),a.max&&c.setAttribute("max",a.max),a.step&&c.setAttribute("step",a.step)}if(n&&c.setAttribute("id",`${n}`),i)for(let e=0;e<i.length;e++)c.setAttribute(i[e].attr,i[e].value),"disabled"===i[e].attr&&"false"===i[e].value&&c.removeAttribute("disabled");l&&(c.innerHTML=l),s&&c.addEventListener(s.listener,(e=>{s.func(e)})),r.appendChild(c)},t=()=>{const t=document.getElementById("editor-table-container");t.parentNode.removeChild(t),e({type:"div",id:"editor-table-container",parent:"editor-area"}),e({type:"table",id:"editor-table",parent:"editor-table-container",attrs:[{attr:"class",value:"editor-table"}]})},o=e=>{let t=[];for(let o=0;o<e.content[0].length;o++)t.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col"});return t},n=e=>{let t=[];for(let o=0;o<e.headerContent[0].length;o++)t.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1});return t},r=e=>{let t=[];for(let o=0;o<e.footerContent[0].length;o++)t.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1});return t},l=(e,t)=>{if(t)return e;const o=document.createElement("div");o.innerHTML=e;let n=o.textContent;return o.innerHTML,o.remove(),n="<>"===n?"":n,n||""};function a(){document.querySelectorAll(".td-input").forEach((e=>{e.addEventListener("input",(e=>{e.target.value=l(e.target.value)})),e.addEventListener("paste",(e=>{e.target.value=l(e.target.value)}))}))}const s=t=>{e({type:"div",id:"editor-table-controls",parent:"editor-table-container"}),e({type:"button",id:"add-row",parent:"editor-table-controls",innerHTML:"add row",eventObject:{listener:"click",func:()=>{t.content.push(o(t)),w(t,!0)}}}),e({type:"button",id:"remove-row",parent:"editor-table-controls",innerHTML:"remove row",eventObject:{listener:"click",func:()=>{for(let e=0;e<t.content.at(-1).length;e++)if(!0===t.content.at(-1)[e].rowCollision)return void alert("Rowspan detected, cannot delete row. Remove rowspan first.");t.content.length>1&&t.content.pop(),w(t,!0)}}}),t.header&&(e({type:"button",id:"add-header-row",parent:"editor-table-controls",innerHTML:"add header row",eventObject:{listener:"click",func:()=>{t.header&&t.headerContent.push(n(t)),w(t,!0)}}}),e({type:"button",id:"remove-header-row",parent:"editor-table-controls",innerHTML:"remove header row",eventObject:{listener:"click",func:()=>{if(t.header){for(let e=0;e<t.headerContent.at(-1).length;e++)if(!0===t.headerContent.at(-1)[e].rowCollision)return void alert("Rowspan detected, cannot delete row. Remove rowspan first.");t.headerContent.length>1&&t.headerContent.pop(),w(t,!0)}}}})),t.footer&&(e({type:"button",id:"add-footer-row",parent:"editor-table-controls",innerHTML:"add footer row",eventObject:{listener:"click",func:()=>{t.footer&&t.footerContent.push(r(t)),w(t,!0)}}}),e({type:"button",id:"remove-footer-row",parent:"editor-table-controls",innerHTML:"remove footer row",eventObject:{listener:"click",func:()=>{if(t.footer){for(let e=0;e<t.footerContent.at(-1).length;e++)if(!0===t.footerContent.at(-1)[e].rowCollision)return void alert("Rowspan detected, cannot delete row. Remove rowspan first.");t.footerContent.length>1&&t.footerContent.pop(),w(t,!0)}}}})),e({type:"button",id:"add-column",parent:"editor-table-controls",innerHTML:"add column",attrs:[{attr:"class",value:"add-column"}],eventObject:{listener:"click",func:()=>{(e=>{e.columnSettings.push({useWidth:!1,width:0,widthUnits:"px",align:"left"}),e.colgroupProps.push({span:1}),e.content.forEach((e=>e.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col"}))),e.headerContent.forEach((e=>e.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}))),e.footerContent.forEach((e=>e.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col"})))})(t),w(t,!0)}}}),e({type:"button",id:"remove-column",parent:"editor-table-controls",innerHTML:"remove column",eventObject:{listener:"click",func:()=>{let e=!1;for(let o=0;o<t.content.length;o++)!0===t.content[o].at(-1).colCollision&&(e=!0);for(let o=0;o<t.headerContent.length;o++)!0===t.headerContent[o].at(-1).colCollision&&(e=!0);for(let o=0;o<t.footerContent.length;o++)!0===t.footerContent[o].at(-1).colCollision&&(e=!0);e?alert("Colspan detected, cannot delete column. Remove colspan first."):(t.columnSettings.length>1&&t.columnSettings.pop(),t.colgroupProps.length>1&&t.colgroupProps.pop(),t.headerContent.forEach((e=>{e.length>1&&e.pop()})),t.content.forEach((e=>{e.length>1&&e.pop()})),t.footerContent.forEach((e=>{e.length>1&&e.pop()})),w(t,!0))}}}),e({type:"input",id:"show-cell-controls-toggle",parent:"editor-table-controls",inputProps:{type:"checkbox",label:"Cell Controls",for:"show-cell-controls-toggle",checked:t.showCellControls},eventObject:{listener:"input",func:()=>{t.showCellControls=!t.showCellControls,w(t,!0)}}}),e({type:"input",id:"colgroup-toggle",parent:"editor-table-controls",inputProps:{type:"checkbox",label:"Colgroup",name:"colgroup-toggle",for:"colgroup-toggle",checked:t.colgroup},eventObject:{listener:"click",func:()=>{t.colgroup=!t.colgroup,w(t,!0)}}}),e({type:"input",id:"caption-toggle",parent:"editor-table-controls",attrs:[{attr:"type",value:"checkbox"},{attr:"name",value:"captionToggle"},{attr:"value",value:"Toggle caption"}],inputProps:{type:"checkbox",label:"Caption",name:"caption-toggle",for:"caption-toggle",value:"Toggle Caption",checked:t.caption},eventObject:{listener:"click",func:()=>{t.caption=!t.caption,w(t,!0)}}}),t.caption&&e({type:"input",id:"table-caption-input",parent:"editor-table-controls",inputProps:{type:"text",label:"Table caption",for:"table-caption-input",value:t.captionText},eventObject:{listener:"input",func:e=>{t.captionText=e.target.value,w(t)}}}),e({type:"input",id:"header-toggle",parent:"editor-table-controls",inputProps:{type:"checkbox",label:"Header",name:"header-toggle",for:"header-toggle",checked:t.header},eventObject:{listener:"click",func:()=>{t.header=!t.header,w(t,!0)}}}),e({type:"input",id:"footer-toggle",parent:"editor-table-controls",inputProps:{type:"checkbox",label:"Footer",name:"footer-toggle",for:"footer-toggle",checked:t.footer},eventObject:{listener:"click",func:()=>{t.footer=!t.footer,w(t,!0)}}}),e({type:"input",id:"allow-tags",parent:"editor-table-controls",inputProps:{type:"checkbox",label:"Allow tags",for:"allow-tags",checked:t.allowTags},eventObject:{listener:"click",func:e=>{if(t.allowTags=!t.allowTags,!t.allowTags&&confirm("Remove all existing tags from the table?")){for(let e=0;e<t.headerContent.length;e++)for(let o=0;o<t.headerContent[e].length;o++)t.headerContent[e][o].innerHTML=l(t.headerContent[e][o].innerHTML),console.log(l(t.headerContent[e][o].innerHTML));for(let e=0;e<t.content.length;e++)for(let o=0;o<t.content[e].length;o++)t.content[e][o].innerHTML=l(t.content[e][o].innerHTML)}w(t,!0)}}}),e({type:"input",id:"table-use-class",parent:"editor-table-controls",inputProps:{type:"checkbox",label:"Use table class",for:"table-use-class",checked:t.useClassName},eventObject:{listener:"click",func:()=>{t.useClassName=!t.useClassName,w(t,!0)}}}),t.useClassName&&e({type:"input",id:"table-class-selector",parent:"editor-table-controls",inputProps:{type:"text",label:"Table classname",for:"table-class-selector",value:t.className},eventObject:{listener:"input",func:e=>{t.className=e.target.value,w(t)}}}),e({type:"button",id:"reset-table",parent:"editor-table-controls",innerHTML:"reset table",eventObject:{listener:"click",func:e=>{confirm("Are you sure you want to clear the current table data?")&&(localStorage.removeItem("savedState"),location.reload())}}})},i=t=>{if(t.colgroup){e({type:"h3",innerHTML:"colgroup settings",parent:"editor-table",attrs:[{attr:"style",value:"display: table-header-group; text-align:left;"}]}),e({type:"colgroup",id:"editor-table-colgroup",parent:"editor-table",attrs:[{attr:"style",value:"display: table-header-group; text-align:left;"}]}),e({type:"tr",id:"editor-colgroup-tr",parent:"editor-table",attrs:[{attr:"style",value:"display: table-header-group; text-align:left;"}]}),e({type:"th",id:"editor-colgroup-header-th",parent:"editor-colgroup-tr",attrs:[{attr:"colspan",value:t.content[0].length.toString()}]});for(let o=0;o<t.colgroupProps.length;o++)e({type:"col",id:`colgroup-item-${o}`,parent:"editor-table-colgroup",attrs:[{attr:"span",value:t.colgroupProps[o].span?t.colgroupProps[o].span+"":1},{attr:"style",value:"display: table-cell; "+(t.columnSettings[o].width>1&&t.columnSettings[o].useWidth?"width:"+t.columnSettings[o].width+"px;":"")}]}),e({type:"h4",parent:`colgroup-item-${o}`,innerHTML:`col ${o}`}),e({type:"input",id:`colgroup-use-span-${o}`,parent:`colgroup-item-${o}`,attrs:[{attr:"type",value:"checkbox"}],inputProps:{type:"checkbox",label:"span",name:"span-toggle",for:`colgroup-use-span-${o}`,value:"span",checked:t.colgroupProps[o].useSpan},eventObject:{listener:"click",func:()=>{t.colgroupProps[o].useSpan=!t.colgroupProps[o].useSpan,w(t,!0)}}}),t.colgroupProps[o].useSpan&&e({type:"input",id:`colgroup-use-span-amount-${o}`,parent:`colgroup-item-${o}`,inputProps:{type:"number",label:`Amount (current max is ${t.content.length+t.headerContent.length+t.footerContent.length})`,name:"span-toggle",for:`colgroup-use-span-${o}`,value:t.colgroupProps[o].span,checked:t.colgroupProps[o].useSpan},eventObject:{listener:"input",func:e=>{e.target.value<=t.content.length+t.headerContent.length+t.footerContent.length?(t.colgroupProps[o].span=e.target.value,w(t)):(alert("Please enter a valid number (span cannot exceed total table rows length)"),e.target.value=""),w(t)}}}),e({type:"input",id:`colgroup-use-classname-name-${o}`,parent:`colgroup-item-${o}`,attrs:[{attr:"type",value:"checkbox"}],inputProps:{type:"checkbox",label:"class",name:"classname-toggle",for:`colgroup-use-classname-name-${o}`,checked:t.colgroupProps[o].useClassName},eventObject:{listener:"click",func:()=>{t.colgroupProps[o].useClassName=!t.colgroupProps[o].useClassName,w(t,!0)}}}),t.colgroupProps[o].useClassName&&e({type:"input",id:`colgroup-use-classname-name-${o}`,parent:`colgroup-item-${o}`,attrs:[{attr:"placeholder",value:"Enter a class name"}],inputProps:{type:"text",label:"name",name:`colgroup-use-classname-name-${o}`,for:`colgroup-use-classname-name-${o}`,value:t.colgroupProps[o].className?t.colgroupProps[o].className:""},eventObject:{listener:"input",func:e=>{void 0!==e.target.value&&(t.colgroupProps[o].className=e.target.value,w(t)),w(t)}}}),e({type:"input",id:`use-col-fixed-width-${o}`,parent:`colgroup-item-${o}`,inputProps:{type:"checkbox",label:"fixed width",for:`use-col-fixed-width-${o}`,checked:t.columnSettings[o].useWidth},eventObject:{listener:"click",func:()=>{t.columnSettings[o].useWidth=!t.columnSettings[o].useWidth,w(t,!0)}}}),t.columnSettings[o].useWidth&&(e({type:"input",id:`col-width-input-${o}`,parent:`colgroup-item-${o}`,inputProps:{type:"number",container:"div",for:`columnWidth-${o}`,label:"col width",value:t.columnSettings[o].width,min:0,max:1e3}}),e({type:"button",id:`col-width-${o}-set`,parent:`colgroup-item-${o}`,innerHTML:"set",eventObject:{listener:"click",func:()=>{const e=document.getElementById(`col-width-input-${o}`).value;t.columnSettings[o].width=e,w(t,!0)}}}),e({type:"button",id:`col-width-${o}-clear`,parent:`colgroup-item-${o}`,innerHTML:"clear",eventObject:{listener:"click",func:()=>{document.getElementById(`col-width-input-${o}`).value=0,t.columnSettings[o].width="0",w(t,!0)}}}))}},c=(e,t,o,n,r,l,a)=>{let s,i;if(l?(s=e.headerContent[t][o].rowspan,i=e.headerContent[t][o].colspan):a?(s=e.footerContent[t][o].rowspan,i=e.footerContent[t][o].colspan):(s=e.content[t][o].rowspan,i=e.content[t][o].colspan),s>1)for(let c=r;c<s;c++)for(let r=0;r<i;r++)l?e.headerContent[t+c][o+r].rowCollision=n:a?e.footerContent[t+c][o+r].rowCollision=n:e.content[t+c][o+r].rowCollision=n;if(i>1)for(let c=r;c<i;c++)for(let r=0;r<s;r++)l?e.headerContent[t+r][o+c].colCollision=n:a?e.footerContent[t+r][o+c].colCollision=n:e.content[t+r][o+c].colCollision=n},p=t=>{if(t.header){e({type:"thead",id:"table-header",parent:"editor-table"}),e({type:"h3",id:"header-heading",parent:"table-header",innerHTML:"table header"});for(let o=0;o<t.headerContent.length;o++){e({type:"tr",id:`table-header-row-${o}`,parent:"table-header"});for(let r=0;r<t.headerContent[o].length;r++)t.headerContent[o][r].rowCollision||t.headerContent[o][r].colCollision||(c(t,o,r,!0,1,!0),e({type:"th",id:`th-${o}${r}`,parent:`table-header-row-${o}`,attrs:[{attr:"rowspan",value:t.headerContent[o][r].rowspan},{attr:"colspan",value:t.headerContent[o][r].colspan}]}),e({type:"div",parent:`th-${o}${r}`,id:`th-grid-container-${o}${r}`,attrs:[{attr:"class",value:"grid-container"}]}),e({type:"textarea",id:`p-${o}${r}`,parent:`th-grid-container-${o}${r}`,innerHTML:t.headerContent[o][r].innerHTML,attrs:[{attr:"class",value:"td-input"}],inputProps:{value:t.headerContent[o][r].innerHTML},eventObject:{listener:"input",func:e=>{t.headerContent[o][r].innerHTML=l(e.target.value,t.allowTags),w(t)}}}),t.showCellControls&&(e({type:"div",id:`th-controls-${o}${r}`,parent:`th-grid-container-${o}${r}`,attrs:[{attr:"class",value:"th-controls"}]}),e({type:"button",id:`increase-header-rowspan-button-${o}${r}`,parent:`th-controls-${o}${r}`,innerHTML:"rs+",attrs:[{attr:"class",value:"increase-rowspan-button"}],eventObject:{listener:"click",func:()=>{let e=0;for(let o=0;o<t.headerContent.length-1;o++)t.headerContent[o][r].rowCollision||(e+=t.headerContent[o][r].rowspan);(e>=t.headerContent.length||o===t.headerContent.length-1)&&t.headerContent.push(n(t)),t.headerContent[o][r].rowspan++,c(t,o,r,!0,1,!0),w(t,!0)}}}),e({type:"button",id:`decrease-header-rowspan-button-${o}${r}`,parent:`th-controls-${o}${r}`,innerHTML:"rs-",attrs:[{attr:"class",value:"decrease-rowspan-button"},{attr:"disabled",value:t.headerContent[o][r].rowspan>1?"false":"true"}],eventObject:{listener:"click",func:()=>{c(t,o,r,!1,0,!0),t.headerContent[o][r].rowspan--,w(t,!0)}}}),e({type:"button",id:`increase-header-colspan-button-${o}${r}`,parent:`th-controls-${o}${r}`,innerHTML:"cs+",eventObject:{listener:"click",func:()=>{let e=0;for(let n=0;n<t.headerContent[o].length-1;n++)t.headerContent[o][n].colCollision||(e+=t.headerContent[o][n].colspan);(e>=t.headerContent[o].length||r===t.headerContent[o].length-1)&&(t.colgroupProps.push({useWidth:!1,width:0,widthUnits:"px",span:1}),t.columnSettings.push({useWidth:!1,width:0,widthUnits:"px",align:"none"}),t.headerContent.forEach((e=>e.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}))),t.footerContent.forEach((e=>e.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col"}))),t.content.forEach((e=>e.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col"})))),t.headerContent[o][r].colspan++,c(t,o,r,!0,1,!0),w(t,!0)}}}),e({type:"button",id:`decrease-colspan-button-${o}${r}`,parent:`th-controls-${o}${r}`,innerHTML:"cs-",attrs:[{attr:"class",value:"decrease-colspan-button"},{attr:"disabled",value:t.headerContent[o][r].colspan>1?"false":"true"}],eventObject:{listener:"click",func:()=>{c(t,o,r,!1,0,!0),t.headerContent[o][r].colspan--,w(t,!0)}}})))}}},d=(t,o)=>{let n;const r=(()=>{for(let e=0;e<t.state.styles.length;e++)if(t.state.styles[e].id===t.id)return n=e,!0;return!1})();e({type:"button",id:t.id,parent:t.parent,innerHTML:"align text: Left",attrs:[{attr:"classname",value:"colcon_text-align"},{attr:"data-style-exists",value:!0===r?"true":"false"}],eventObject:{listener:"click",func:e=>{if(r)t.state.styles.splice(n,1);else{let e={id:t.id,selector:`tbody>tr>:nth-child(${t.c})`,style:"text-align: left"};t.state.styles.push(e)}o(t.state,!0)}}})},u=t=>{e({type:"h3",id:"body-heading",parent:"editor-table",innerHTML:"table body"}),e({type:"tbody",id:"table-body",parent:"editor-table"}),e({type:"tr",id:"table-col-control-row",parent:"table-body"});for(let n=0;n<t.content.length;n++){e({type:"tr",id:`table-row-${n}`,parent:"table-body"});for(let r=0;r<t.content[n].length;r++)t.content[n][r].rowCollision||t.content[n][r].colCollision||(0===n&&(e({type:"td",id:`td-colcon-${r}`,parent:"table-col-control-row"}),d({id:`colcon-${r}`,parent:`td-colcon-${r}`,state:t,c:r},w)),c(t,n,r,!0,1),e({type:"td",id:`td-${n}${r}`,parent:`table-row-${n}`,attrs:[{attr:"rowspan",value:t.content[n][r].rowspan},{attr:"colspan",value:t.content[n][r].colspan}]}),e({type:"div",parent:`td-${n}${r}`,id:`td-grid-container-${n}${r}`,attrs:[{attr:"class",value:"grid-container"}]}),e({type:"textarea",id:`p-${n}${r}`,parent:`td-grid-container-${n}${r}`,innerHTML:t.content[n][r].innerHTML,attrs:[{attr:"class",value:"td-input"}],inputProps:{value:t.content[n][r].innerHTML},eventObject:{listener:"input",func:e=>{t.content[n][r].innerHTML=l(e.target.value,t.allowTags),w(t)}}}),t.showCellControls&&(e({type:"div",id:`td-body-controls-${n}${r}`,parent:`td-grid-container-${n}${r}`,attrs:[{attr:"class",value:"td-body-controls"}]}),e({type:"button",id:`increase-rowspan-button-${n}${r}`,parent:`td-body-controls-${n}${r}`,innerHTML:"rs+",attrs:[{attr:"class",value:"increase-rowspan-button"}],eventObject:{listener:"click",func:()=>{let e=0;for(let o=0;o<t.content.length-1;o++)t.content[o][r].rowCollision||(e+=t.content[o][r].rowspan);(e>=t.content.length||n===t.content.length-1)&&t.content.push(o(t)),t.content[n][r].rowspan++,c(t,n,r,!0,1),w(t,!0)}}}),e({type:"button",id:`decrease-rowspan-button-${n}${r}`,parent:`td-body-controls-${n}${r}`,innerHTML:"rs-",attrs:[{attr:"class",value:"decrease-rowspan-button"},{attr:"disabled",value:t.content[n][r].rowspan>1?"false":"true"}],eventObject:{listener:"click",func:()=>{c(t,n,r,!1,0),t.content[n][r].rowspan--,w(t,!0)}}}),e({type:"button",id:`increase-colspan-button-${n}${r}`,parent:`td-body-controls-${n}${r}`,innerHTML:"cs+",eventObject:{listener:"click",func:()=>{let e=0;for(let o=0;o<t.content[n].length-1;o++)t.content[n][o].colCollision||(e+=t.content[n][o].colspan);(e>=t.content[n].length||r===t.content[n].length-1)&&(t.colgroupProps.push({useWidth:!1,width:0,widthUnits:"px",span:1}),t.columnSettings.push({useWidth:!1,width:0,widthUnits:"px",align:"none"}),t.content.forEach((e=>e.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col"}))),t.headerContent.forEach((e=>e.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}))),t.footerContent.forEach((e=>e.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col"})))),t.content[n][r].colspan++,c(t,n,r,!0,1),w(t,!0)}}}),e({type:"button",id:`decrease-colspan-button-${n}${r}`,parent:`td-body-controls-${n}${r}`,innerHTML:"cs-",attrs:[{attr:"class",value:"decrease-colspan-button"},{attr:"disabled",value:t.content[n][r].colspan>1?"false":"true"}],eventObject:{listener:"click",func:()=>{c(t,n,r,!1,0),t.content[n][r].colspan--,w(t,!0)}}}),e({type:"input",id:`isHeader-${n}${r}`,parent:`td-body-controls-${n}${r}`,attrs:[{attr:"class",value:"isheader"}],inputProps:{type:"checkbox",container:"span",containerClass:"isheader-container",label:"Is header?",for:`isHeader-${n}${r}`,name:`isHeader-${n}${r}`,checked:t.content[n][r].isHeader},eventObject:{listener:"change",func:e=>{t.content[n][r].isHeader=!t.content[n][r].isHeader,w(t,!0)}}}),t.content[n][r].isHeader&&(e({type:"div",id:`isHeaderContainer-${n}${r}`,parent:`td-body-controls-${n}${r}`,attrs:[{attr:"class",value:"isheader-scope-container"}]}),e({type:"span",innerHTML:"Header scope:",parent:`isHeaderContainer-${n}${r}`}),e({type:"input",id:`headerScopeCol-${n}${r}`,parent:`isHeaderContainer-${n}${r}`,attrs:[{attr:"class",value:"headerScope"}],inputProps:{type:"radio",container:"div",label:"Col",for:`headerScopeCol-${n}${r}`,name:`scope-${n}${r}`,checked:"col"===t.content[n][r].headerScope},eventObject:{listener:"change",func:()=>{t.content[n][r].headerScope="col",w(t,!0)}}}),e({type:"input",id:`headerScopeRow-${n}${r}`,parent:`isHeaderContainer-${n}${r}`,attrs:[{attr:"class",value:"headerScope"}],inputProps:{type:"radio",container:"div",label:"Row",for:`headerScopeRow-${n}${r}`,name:`scope-${n}${r}`,checked:"row"===t.content[n][r].headerScope},eventObject:{listener:"change",func:()=>{t.content[n][r].headerScope="row",w(t,!0)}}}))))}},h=t=>{if(t.footer){e({type:"h3",id:"footer-heading",parent:"editor-table",innerHTML:"table footer"}),e({type:"tfoot",id:"table-footer",parent:"editor-table"});for(let o=0;o<t.footerContent.length;o++){e({type:"tr",id:`table-footer-row-${o}`,parent:"table-footer"});for(let n=0;n<t.footerContent[o].length;n++)t.footerContent[o][n].rowCollision||t.footerContent[o][n].colCollision||(c(t,o,n,!0,1,!1,!0),e({type:"td",id:`footer-td-${o}${n}`,parent:`table-footer-row-${o}`,attrs:[{attr:"rowspan",value:t.footerContent[o][n].rowspan},{attr:"colspan",value:t.footerContent[o][n].colspan}]}),e({type:"textarea",id:`fp-${o}${n}`,parent:`footer-td-${o}${n}`,innerHTML:t.footerContent[o][n].innerHTML,attrs:[{attr:"class",value:"td-input"}],inputProps:{value:t.footerContent[o][n].innerHTML},eventObject:{listener:"input",func:e=>{t.footerContent[o][n].innerHTML=l(e.target.value,t.allowTags),w(t)}}}),t.showCellControls&&(e({type:"div",id:`td-footer-controls-${o}${n}`,parent:`footer-td-${o}${n}`,attrs:[{attr:"class",value:"td-footer-controls"}]}),e({type:"button",id:`increase-footer-rowspan-button-${o}${n}`,parent:`td-footer-controls-${o}${n}`,innerHTML:"rs+",attrs:[{attr:"class",value:"increase-rowspan-button"}],eventObject:{listener:"click",func:()=>{let e=0;for(let o=0;o<t.footerContent.length-1;o++)t.footerContent[o][n].rowCollision||(e+=t.footerContent[o][n].rowspan);(e>=t.footerContent.length||o===t.footerContent.length-1)&&t.footerContent.push(r(t)),t.footerContent[o][n].rowspan++,c(t,o,n,!0,1,!1,!0),w(t,!0)}}}),e({type:"button",id:`decrease-footer-rowspan-button-${o}${n}`,parent:`td-footer-controls-${o}${n}`,innerHTML:"rs-",attrs:[{attr:"class",value:"decrease-rowspan-button"},{attr:"disabled",value:t.footerContent[o][n].rowspan>1?"false":"true"}],eventObject:{listener:"click",func:()=>{c(t,o,n,!1,0,!1,!0),t.footerContent[o][n].rowspan--,w(t,!0)}}}),e({type:"button",id:`increase-footer-colspan-button-${o}${n}`,parent:`td-footer-controls-${o}${n}`,innerHTML:"cs+",eventObject:{listener:"click",func:()=>{let e=0;for(let n=0;n<t.footerContent[o].length-1;n++)t.footerContent[o][n].colCollision||(e+=t.footerContent[o][n].colspan);(e>=t.footerContent[o].length||n===t.footerContent[o].length-1)&&(t.colgroupProps.push({useWidth:!1,width:0,widthUnits:"px",span:1}),t.columnSettings.push({useWidth:!1,width:0,widthUnits:"px",align:"none"}),t.headerContent.forEach((e=>e.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}))),t.footerContent.forEach((e=>e.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}))),t.content.forEach((e=>e.push({innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col"})))),t.footerContent[o][n].colspan++,c(t,o,n,!0,1,!1,!0),w(t,!0)}}}),e({type:"button",id:`decrease-colspan-button-${o}${n}`,parent:`td-footer-controls-${o}${n}`,innerHTML:"cs-",attrs:[{attr:"class",value:"decrease-colspan-button"},{attr:"disabled",value:t.footerContent[o][n].colspan>1?"false":"true"}],eventObject:{listener:"click",func:()=>{c(t,o,n,!1,0,!1,!0),t.footerContent[o][n].colspan--,w(t,!0)}}}),e({type:"input",id:`footer-isHeader-${o}${n}`,parent:`td-footer-controls-${o}${n}`,attrs:[{attr:"class",value:"isheader"}],inputProps:{type:"checkbox",container:"div",label:"Is header",for:`footer-isHeader-${o}${n}`,name:`footer-isHeader-${o}${n}`,checked:t.footerContent[o][n].isHeader},eventObject:{listener:"change",func:e=>{t.footerContent[o][n].isHeader=!t.footerContent[o][n].isHeader,w(t,!0)}}}),t.footerContent[o][n].isHeader&&(e({type:"div",id:`footer-isHeaderContainer-${o}${n}`,parent:`td-footer-controls-${o}${n}`}),e({type:"span",innerHTML:"scope",parent:`footer-isHeaderContainer-${o}${n}`}),e({type:"input",id:`footer-headerScopeCol-${o}${n}`,parent:`footer-isHeaderContainer-${o}${n}`,attrs:[{attr:"class",value:"headerScope"}],inputProps:{type:"radio",container:"div",label:"Col",for:`footer-headerScopeCol-${o}${n}`,name:`footer-scope-${o}${n}`,checked:"col"===t.footerContent[o][n].headerScope},eventObject:{listener:"change",func:()=>{t.footerContent[o][n].headerScope="col",w(t,!0)}}}),e({type:"input",id:`footer-headerScopeRow-${o}${n}`,parent:`footer-isHeaderContainer-${o}${n}`,attrs:[{attr:"class",value:"headerScope"}],inputProps:{type:"radio",container:"div",label:"Row",for:`footer-headerScopeRow-${o}${n}`,name:`footer-scope-${o}${n}`,checked:"row"===t.footerContent[o][n].headerScope},eventObject:{listener:"change",func:()=>{t.footerContent[o][n].headerScope="row",w(t,!0)}}}))))}}},g=e=>{[t,s,i,p,u,h].map((t=>t(e)));document.querySelectorAll("input.td-input").forEach((t=>{t.addEventListener("input",(t=>{t.target.value=l(t.target.value,e.allowTags)}))}))},f=(e,t)=>""===e?"":"string"!=typeof e?'replaceHTML error: Argument at parameter "text" is not of type "string".':(t?"&lt;br&gt;"===(e=(e=(e=(e=e.replace(/\[\/]?n/g,"<br>")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/ /g,"&nbsp;")).substr(e.length-10)&&(e=e.slice(0,-10)):e=(e=(e=(e=e.replace(/<br\s*[\/]?>/gi,"\n")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&nbsp;/g," "),e),b=t=>{let o="";const n=e=>" ".repeat(e),r=document.getElementById("table-code");let l="";if(t.styles.length>0){o+="&lt;style&gt;",o+="<br>";for(let e=0;e<t.styles.length;e++)o+=`${t.styles[e].selector} {`,o+="<br>",o+=`${n(2)}${t.styles[e].style};`,o+="<br>",o+="}",o+="<br>",o+=t.styles.length===e?"":"<br>";o+="&lt;/style&gt;",o+="<br><br>"}if(t.useClassName&&t.className.length>0&&(l=` class="${t.className}"`),o+=`&lt;table${l}&gt<br>`,t.caption&&(o+=`${n(2)}&lt;caption&gt${t.captionText}&lt;/caption&gt<br>`),t.colgroup){o+=`${n(2)}&lt;colgroup&gt<br>`;for(let e=0;e<t.colgroupProps.length;e++){let r=`${n(4)}&lt;col`;t.colgroupProps[e].span>1&&t.colgroupProps[e].useSpan&&(r+=` span="${t.colgroupProps[e].span}"`),""!==t.colgroupProps[e].className&&void 0!==t.colgroupProps[e].className&&(r+=` class="${t.colgroupProps[e].className}"`),0!==t.columnSettings[e].width&&t.columnSettings[e].useWidth&&(r+=` style="width:${t.columnSettings[e].width}${t.columnSettings[e].widthUnits}"`),r+="&gt<br>",o+=r}o+=`${n(2)}&lt;/colgroup&gt<br>`}if(t.header){o+=`${n(2)}&lt;thead&gt<br>`;for(let e=0;e<t.headerContent.length;e++){o+=`${n(4)}&lt;tr&gt<br>`;for(let r=0;r<t.headerContent[e].length;r++){let l="th";t.headerContent[e][r].colCollision||t.headerContent[e][r].rowCollision||(o+=`${n(6)}&lt;${l}`,t.headerContent[e][r].rowspan>1&&(o+=` rowspan="${t.headerContent[e][r].rowspan}"`),t.headerContent[e][r].colspan>1&&(o+=` colspan="${t.headerContent[e][r].colspan}"`),o+=`&gt${f(t.headerContent[e][r].innerHTML,!0)}&lt;/${l}&gt<br>`)}o+=`${n(4)}&lt;/tr&gt<br>`}o+=`${n(2)}&lt;/thead&gt<br>`}o+=`${n(2)}&lt;tbody&gt<br>`;for(let e=0;e<t.content.length;e++){o+=`${n(4)}&lt;tr&gt<br>`;for(let r=0;r<t.content[e].length;r++){let l=t.content[e][r].isHeader,a=t.content[e][r].headerScope,s=l?`th scope="${a}"`:"td",i=l?"th":"td";t.content[e][r].colCollision||t.content[e][r].rowCollision||(o+=`${n(6)}&lt;${s}`,t.content[e][r].rowspan>1&&(o+=` rowspan="${t.content[e][r].rowspan}"`),t.content[e][r].colspan>1&&(o+=` colspan="${t.content[e][r].colspan}"`),o+=`&gt${f(t.content[e][r].innerHTML,!0)}&lt;/${i}&gt<br>`)}o+=`${n(4)}&lt;/tr&gt<br>`}if(o+=`${n(2)}&lt;/tbody&gt<br>`,t.footer){o+=`${n(2)}&lt;tfoot&gt<br>`;for(let e=0;e<t.footerContent.length;e++){o+=`${n(4)}&lt;tr&gt<br>`;for(let r=0;r<t.footerContent[e].length;r++){let l=t.footerContent[e][r].isHeader,a=t.footerContent[e][r].headerScope,s=l?`th scope="${a}"`:"td",i=l?"th":"td";t.footerContent[e][r].colCollision||t.footerContent[e][r].rowCollision||(o+=`${n(6)}&lt;${s}`,t.footerContent[e][r].rowspan>1&&(o+=` rowspan="${t.content[e][r].rowspan}"`),t.footerContent[e][r].colspan>1&&(o+=` colspan="${t.footerContent[e][r].colspan}"`),o+=`&gt${f(t.footerContent[e][r].innerHTML,!0)}&lt;/${i}&gt<br>`)}o+=`${n(4)}&lt;/tr&gt<br>`}o+=`${n(2)}&lt;/tfoot&gt<br>`}return o+="&lt;/table&gt<br>",r.innerHTML=o,document.getElementById("copy-table-code")||e({type:"button",id:"copy-table-code",parent:"markup-controls",innerHTML:"Copy HTML",eventObject:{listener:"click",func:()=>{(e=>{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)})(f(r.innerHTML))}}}),o},C=t=>{let o=document.getElementById("preview-table");if(o&&o.parentNode.removeChild(o),e({type:"table",id:"preview-table",parent:"preview"}),t.caption&&e({type:"caption",id:"preview-table-caption",parent:"preview-table",innerHTML:t.captionText}),t.colgroup){e({type:"colgroup",id:"preview-colgroup",parent:"preview-table"});for(let o=0;o<t.columnSettings.length;o++){let n=[];t.columnSettings[o].width&&n.push({attr:"style",value:`width:${t.columnSettings[o].width}${t.columnSettings[o].widthUnits}`}),t.colgroupProps[o].useSpan&&t.colgroupProps[o].span>1&&n.push({attr:"span",value:t.colgroupProps[o].span}),e({type:"col",id:`preview-col-${o}`,parent:"preview-colgroup",attrs:n})}}if(t.header){e({type:"thead",id:"preview-thead",parent:"preview-table"});for(let o=0;o<t.headerContent.length;o++){e({type:"tr",id:`preview-table-header-row-${o}`,parent:"preview-thead"});for(let n=0;n<t.headerContent[o].length;n++){if(t.headerContent[o][n].rowCollision||t.headerContent[o][n].colCollision)continue;e({type:"th",id:`preview-th-${o}${n}`,parent:`preview-table-header-row-${o}`,innerHTML:t.headerContent[o][n].innerHTML,attrs:[{attr:"rowspan",value:t.headerContent[o][n].rowspan},{attr:"colspan",value:t.headerContent[o][n].colspan}]})}}}e({type:"tbody",id:"preview-tbody",parent:"preview-table"});for(let o=0;o<t.content.length;o++){e({type:"tr",id:`preview-table-row-${o}`,parent:"preview-tbody"});for(let n=0;n<t.content[o].length;n++){if(t.content[o][n].rowCollision||t.content[o][n].colCollision)continue;let r=t.content[o][n].isHeader?"th":"td";e({type:r,id:`preview-td-${o}${n}`,parent:`preview-table-row-${o}`,innerHTML:t.content[o][n].innerHTML,attrs:[{attr:"rowspan",value:t.content[o][n].rowspan},{attr:"colspan",value:t.content[o][n].colspan},{attr:"scope",value:t.content[o][n].headerScope}]})}}if(t.footer){e({type:"tfoot",id:"preview-tfoot",parent:"preview-table"});for(let o=0;o<t.footerContent.length;o++){e({type:"tr",id:`preview-table-footer-row-${o}`,parent:"preview-tfoot"});for(let n=0;n<t.footerContent[o].length;n++){if(t.footerContent[o][n].rowCollision||t.footerContent[o][n].colCollision)continue;let r=t.footerContent[o][n].isHeader?"th":"td";e({type:r,id:`preview-footer-td-${o}${n}`,parent:`preview-table-footer-row-${o}`,innerHTML:t.footerContent[o][n].innerHTML,attrs:[{attr:"rowspan",value:t.footerContent[o][n].rowspan},{attr:"colspan",value:t.footerContent[o][n].colspan},{attr:"scope",value:t.footerContent[o][n].headerScope}]})}}}},w=(e,t=!1)=>{localStorage.setItem("savedState",JSON.stringify(e)),t&&g(e),e.allowTags||a(),b(e),C(e)};let $="",v={loading:!0,showCellControls:!0,allowTags:!1,header:!0,footer:!1,colgroup:!1,caption:!1,captionText:"",useClassName:!1,className:"",styles:[],columnSettings:[{useWidth:!1,width:0,widthUnits:"px",align:"none"},{useWidth:!1,width:0,widthUnits:"px",align:"none"},{useWidth:!1,width:0,widthUnits:"px",align:"none"}],colgroupProps:[{useSpan:!1,span:1,useClassName:!1,className:""},{useSpan:!1,span:1,useClassName:!1,className:""},{useSpan:!1,span:1,useClassName:!1,className:""}],headerContent:[[{innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1},{innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1}]],content:[[{innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col"},{innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col"},{innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col"}],[{innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col"},{innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col"},{innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col"}]],footerContent:[[{innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col"},{innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col"},{innerHTML:"",rowspan:1,colspan:1,rowCollision:!1,colCollision:!1,isHeader:!1,headerScope:"col"}]]};new Promise(((e,t)=>{$=JSON.parse(localStorage.getItem("savedState")),$?e("Save state found."):t("No save state.")})).then((()=>{v=$,y()})).catch((()=>{console.log("No local state"),y()}));const y=()=>{g(v),b(v),C(v),v.allowTags||a(),document.getElementById("loading-modal").classList.add("display-none")}}();
