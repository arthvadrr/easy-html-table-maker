!function(){"use strict";const e={state:{loading:!0,header:!0,caption:!1,captionText:"captionText",headerContent:[{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1}],content:[[{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1}],[{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1}],[{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1}],[{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1}],[{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1},{innerHTML:"innerHTML",rowspan:1,colspan:1,ignore:!1,collision:!1}]]},addState:(e,n)=>state[e]=n,removeState:e=>delete state[e],updateState:(e,n)=>state[e]=n},n=(e,n,t,o,r,i,a,l,c,s,p)=>{if("string"==typeof n&&(n=document.getElementById(n)),!e||!n)return void console.log("createElement requires type and parent params!");let d=document.createElement(e);if("input"===e){"checkbox"===l.type&&(d.setAttribute("type",l.type),d.setAttribute("name",l.name),d.setAttribute("value",l.value),d.checked=l.checked);const e=document.createElement("div"),o=document.createElement("label");o.setAttribute("for",t),o.innerHTML=l.value,e.appendChild(o),n.appendChild(e),n=e}t&&d.setAttribute("id",`${t}`),o&&d.setAttribute("class",`${o}`),r&&d.setAttribute("contenteditable","true"),c&&d.setAttribute("rowspan",c),s&&d.setAttribute("colspan",s),i&&(d.innerHTML=i),a&&d.addEventListener(a.type,(e=>{a.func(e)})),p&&d.setAttribute("disabled","true"),n.appendChild(d)},t=(e,n)=>{n||(n=document.getElementById("table-code"));let t="";const o=e=>"Â ".repeat(e);if(t+="&lt;table&gt<br>",e.caption&&(t+=`${o(2)}&lt;caption&gt${e.captionText}&lt;/caption&gt<br>`),e.header){t+=`${o(2)}&lt;thead&gt<br>${o(4)}&lt;tr&gt<br>`;for(let n=0;n<e.headerContent.length;n++)t+=`${o(6)}&lt;th&gt${e.headerContent[n].innerHTML}&lt;/th&gt<br>`;t+=`${o(4)}&lt;/tr&gt<br>${o(2)}&lt;/thead&gt<br>`}t+=`${o(2)}&lt;tbody&gt<br>`;for(let n=0;n<e.content.length;n++){t+=`${o(4)}&lt;tr&gt<br>`;for(let r=0;r<e.content[n].length;r++)e.content[n][r].ignore||(e.content[n][r].rowspan<2?t+=`${o(6)}&lt;td&gt${e.content[n][r].innerHTML}&lt;/td&gt<br>`:t+=`${o(6)}&lt;td rowspan="${e.content[n][r].rowspan}"&gt${e.content[n][r].innerHTML}&lt;/td&gt<br>`);t+=`${o(4)}&lt;/tr&gt<br>`}t+=`${o(2)}&lt;/tbody&gt<br>`,t+="&lt;/table&gt<br>",n.innerHTML=t},o=e=>{let n=[];for(let t=0;t<e.content[0].length;t++)n.push({innerHTML:" hi ",rowspan:1,ignore:!1,collision:!1});return n},r=e=>{const{state:i}=e,a=document.getElementById("table-code");let l=document.getElementById("editor-table-container"),c=document.getElementById("editor-area");l.parentNode.removeChild(l),l=document.createElement("div"),l.setAttribute("id","editor-table-container"),c.appendChild(l);const s=()=>{localStorage.setItem("savedState",JSON.stringify(i)),r(e),t(e.state,a)},p=(e,n,t,o,r,a)=>{if(i.content[e][n].rowspan>1)for(let l=r;l<o;l++)i.content[e+l][n].ignore=t,i.content[e+l][n].collision=a};if(n("div",l,"editor-table-container"),n("table","editor-table-container","editor-table","editor-table"),n("button","editor-table-container","add-row","add-row-button",!1,"Add Row",{type:"click",func:()=>{i.content.push(o(e.state)),s()}}),n("button","editor-table-container","remove-row","remove-row-button",!1,"Remove Row",{type:"click",func:()=>{for(let e=0;e<i.content.at(-1).length;e++)if("rowspan"===i.content.at(-1)[e].collision)return void console.log("rowspan detected, cannot delete row. Remove rowspan first.");i.content.length>1&&i.content.pop(),s()}}),n("button","editor-table-container","add-column","add-column-button",!1,"Add Column",{type:"click",func:()=>{i.header&&i.headerContent.push({innerHTML:"col",rowspan:1,colspan:1,ignore:!1,collision:!1}),e.state.content.forEach((e=>e.push({innerHTML:"col",rowspan:1,colspan:1,ignore:!1,collision:!1}))),s()}}),n("button","editor-table-container","remove-column","remove-column-button",!1,"Remove Column",{type:"click",func:()=>{i.header&&i.headerContent.length>1&&i.headerContent.pop(),i.content.forEach((e=>{e.length>1&&e.pop()})),s()}}),n("input","editor-table-container","caption-toggle","caption-toggle",!1,!1,{type:"click",func:()=>{i.caption=!i.caption,s()}},{type:"checkbox",name:"captionToggle",value:"Toggle caption",checked:i.caption}),n("input","editor-table-container","header-toggle","header-toggle",!1,!1,{type:"click",func:()=>{i.header=!i.header,s()}},{type:"checkbox",name:"headerToggle",value:"Table header",checked:i.header}),i.caption&&n("caption","editor-table","table-caption",!1,!0,i.captionText,{type:"input",func:n=>{i.captionText=n.target.textContent,localStorage.setItem("savedState",JSON.stringify(i)),t(e.state,a)}}),i.header){n("thead","editor-table","table-head"),n("tr","table-head","table-header");for(let o=0;o<i.headerContent.length;o++)n("th","table-header",!1,!1,!0,i.headerContent[o].innerHTML,{type:"input",func:n=>{i.headerContent[o].innerHTML=n.target.textContent,localStorage.setItem("savedState",JSON.stringify(i)),t(e.state,a)}})}n("tbody","editor-table","table-body");for(let r=0;r<i.content.length;r++){n("tr","table-body",`table-row-${r}`);for(let l=0;l<i.content[r].length;l++){if(1==i.content[r][l].ignore)continue;n("td",`table-row-${r}`,`td-${r}${l}`,!1,!1,!1,{type:"input",func:n=>{i.content[r][l].innerHTML=n.target.value,localStorage.setItem("savedState",JSON.stringify(i)),t(e.state,a)}},!1,i.content[r][l].rowspan,i.content[r][l].colspan);let c=document.createElement("input"),d=document.getElementById(`td-${r}${l}`);c.value=i.content[r][l].innerHTML,d.appendChild(c),p(r,l,!0,i.content[r][l].rowspan,1,"rowspan"),r<i.content.length-1&&n("button",`td-${r}${l}`,`increase-rowspan-button-${r}${l}`,"increase-rowspan-button",!1,"RS+",{type:"click",func:()=>{let n=0;for(let e=0;e<i.content.length-1;e++)"rowspan"!==i.content[e][l].collision&&(n+=i.content[e][l].rowspan);n>=i.content.length&&i.content.push(o(e.state)),i.content[r][l].rowspan++,p(r,l,!0,i.content[r][l].rowspan,1,"rowspan"),s()}},!1,!1,!1,!1),i.content[r][l].rowspan>1&&n("button",`td-${r}${l}`,`decrease-rowspan-button-${r}${l}`,"decrease-rowspan-button",!1,"RS-",{type:"click",func:()=>{p(r,l,!1,i.content[r][l].rowspan,0,!1),i.content[r][l].rowspan--,s()}})}}},i=document.getElementById("copy-table-code"),a=document.getElementById("table-code");let l="";const c=new Promise(((e,n)=>{l=JSON.parse(localStorage.getItem("savedState")),l?e("Save state found."):n("No save state.")}));c.then((()=>{e.state=l,s()})),c.catch((()=>{console.log("No local state"),s()}));const s=()=>{r(e),t(e.state,a),i.addEventListener("click",(()=>{(e=>{const n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n)})(a.innerHTML.replace(/<br\s*[\/]?>/gi,"\n").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," "))}))}}();
